
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ТолькоПросмотр = Параметры.ТолькоПросмотр;
	ПовторныйЗапрос = Параметры.ПовторныйЗапрос;
	
	Для каждого СтрокаТЧ Из Параметры.ЗапрашиваемыеДанные Цикл
		ЗаполнитьЗначенияСвойств(Объект.ЗапрашиваемыеДанные.Добавить(), СтрокаТЧ);
	КонецЦикла;
	
	Если ПовторныйЗапрос Тогда
		Заголовок = НСтр("ru = 'Повторно запрашиваемые данные';
						|en = 'Data requested again'");
	Иначе
		Заголовок = НСтр("ru = 'Запрашиваемые данные';
						|en = 'Requested data'");
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ОК(Команда)
	
	ЗакрытьФорму();
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Процедура ЗакрытьФорму()
	
	Отказ = Ложь;
	Если Модифицированность Тогда
		ЗапрашиваемыеДанные = РезультатЗапрашиваемыеДанные();
		Модифицированность = Ложь;
	Иначе
		ЗапрашиваемыеДанные = Неопределено;
	КонецЕсли;
	
	Если Не Отказ Тогда
		Закрыть(ЗапрашиваемыеДанные);
	КонецЕсли; 
	
КонецПроцедуры

&НаКлиенте
Функция РезультатЗапрашиваемыеДанные()
	
	ЗапрашиваемыеДанные = Новый Соответствие;
	Для каждого СтрокаТЧ Из Объект.ЗапрашиваемыеДанные Цикл
		ЗапрашиваемыеДанные.Вставить(СтрокаТЧ.ТипДанных, СтрокаТЧ.Запрашивать);
	КонецЦикла;
	
	Данные = Новый Структура("ПовторныйЗапрос,ЗапрашиваемыеДанные", ПовторныйЗапрос, ЗапрашиваемыеДанные);
	Возврат Данные;

КонецФункции

#КонецОбласти