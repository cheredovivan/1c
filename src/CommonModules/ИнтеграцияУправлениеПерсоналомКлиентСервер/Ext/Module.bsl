#Область СлужебныйПрограммныйИнтерфейс

// Возвращает максимальный размер принимаемого файла в байтах.
Функция МаксимальныйРазмерПринимаемогоФайла() Экспорт
	Возврат 5242880;
КонецФункции

Функция РезультатПроверкиДанныхОтветственного(Ответственный, Данные) Экспорт
	
	Результат = Новый Структура("ДанныеЗаполнены,ЕстьОшибки,СтрокаПояснение,СтрокаТелефонПочта");
	Результат.ДанныеЗаполнены = Ложь;
	Результат.ЕстьОшибки = Ложь;
	
	Если Не ЗначениеЗаполнено(Ответственный) Тогда
		Результат.СтрокаТелефонПочта = НСтр("ru = 'Укажите ответственное лицо';
											|en = 'Specify responsible person'");
		Результат.СтрокаПояснение = НСтр("ru = 'Убедитесь в том, что у ответственного лица задан действующий мобильный телефон и адрес электронной почты';
										|en = 'Make sure the person in charge has a valid mobile phone number and email address'");
	Иначе
		
		ТелефонУказан = Ложь;
		ТелефонСоответствуетТребованиям = Ложь;
		Если ЗначениеЗаполнено(Данные.МобильныйТелефон) Тогда
			СтрокаТелефон = СокрЛП(Данные.МобильныйТелефон);
			ТелефонУказан = Истина;
			ТелефонСоответствуетТребованиям = (Лев(СтрокаТелефон,1) = "+") И СтрНайти("123456789", Сред(СтрокаТелефон, 2, 1)) <> 0;
		Иначе
			СтрокаТелефон = НСтр("ru = '<телефон не указан>';
								|en = '<phone is not specified>'");
		КонецЕсли;
		
		ПочтаУказана = Ложь;
		ПочтаСоответствуетТребованиям = Ложь;
		Если ЗначениеЗаполнено(Данные.ЭлектроннаяПочта) Тогда
			СтрокаПочта = СОКРЛП(Данные.ЭлектроннаяПочта);
			ПочтаУказана = Истина;
			ПочтаСоответствуетТребованиям = ОбщегоНазначенияКлиентСервер.АдресЭлектроннойПочтыСоответствуетТребованиям(Данные.ЭлектроннаяПочта);
		Иначе
			СтрокаПочта = НСтр("ru = '<Email не указан>';
								|en = '<Email не указан>'");
		КонецЕсли;
		
		Результат.СтрокаТелефонПочта = СтрШаблон(НСтр("ru = 'Мобильный телефон и почта: %1, %2';
														|en = 'Cell phone and email:%1, %2'"), СтрокаТелефон, СтрокаПочта);
		
		Если ТелефонУказан И ТелефонСоответствуетТребованиям И ПочтаУказана И ПочтаСоответствуетТребованиям И ЗначениеЗаполнено(Данные.Пол) Тогда
			Результат.СтрокаПояснение = НСтр("ru = 'Убедитесь в том, что у ответственного лица задан действующий мобильный телефон и адрес электронной почты';
											|en = 'Make sure the person in charge has a valid mobile phone number and email address'");
			Результат.ДанныеЗаполнены = Истина;
		Иначе
			
			Результат.ЕстьОшибки = Истина;
			Если ТелефонУказан И ТелефонСоответствуетТребованиям И ПочтаУказана И ПочтаСоответствуетТребованиям Тогда
				Результат.СтрокаПояснение = НСтр("ru = 'Заполните, пожалуйста, пол ответственного';
												|en = 'Please fill in the responsible person''s gender'");
			Иначе
				
				СообщениеНеУказанПол = "";
				Если Не ЗначениеЗаполнено(Данные.Пол) Тогда
					СообщениеНеУказанПол = НСтр("ru = ', не указан пол';
												|en = ', gender not specified'");
				КонецЕсли;
				
				СообщениеПочтаСоответствуетТребованиям = "";
				Если ПочтаУказана И Не ПочтаСоответствуетТребованиям Тогда
					СообщениеПочтаСоответствуетТребованиям = НСтр("ru = ', адрес электронной почты указан некорректно';
																	|en = ', invalid email address'");
				КонецЕсли;
				
				СообщениеТелефонСоответствуетТребованиям = "";
				Если ТелефонУказан И Не ТелефонСоответствуетТребованиям Тогда
					Если (Лев(СтрокаТелефон,1) <> "+") Тогда
						СообщениеТелефонСоответствуетТребованиям = НСтр("ru = ', номер телефон должен начинаться с символа ""+""';
																		|en = ', phone number should start with ""+""'");
					Иначе
						СообщениеТелефонСоответствуетТребованиям = НСтр("ru = ', код страны в мобильном телефоне указан некорректно';
																		|en = ', the country code in the mobile phone is incorrect'");
					КонецЕсли;
				КонецЕсли;
				
				Результат.СтрокаПояснение = СтрШаблон(
					НСтр("ru = 'Заполните, пожалуйста, контактные данные ответственного%1%2%3';
						|en = 'Please fill in the contact details of the responsible person%1%2%3'"),
					СообщениеТелефонСоответствуетТребованиям,
					СообщениеПочтаСоответствуетТребованиям,
					СообщениеНеУказанПол);
				
			КонецЕсли;
			
		КонецЕсли;
		
	КонецЕсли;
	
	Возврат Результат;

КонецФункции

#КонецОбласти
