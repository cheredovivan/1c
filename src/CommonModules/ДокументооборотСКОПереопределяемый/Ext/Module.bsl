////////////////////////////////////////////////////////////////////////////////
// Подсистема "Электронный документооборот с контролирующими органами".
//
////////////////////////////////////////////////////////////////////////////////

#Область ПрограммныйИнтерфейс

// Срабатывает после записи объекта ДокументРеализацииПолномочийНалоговыхОрганов, когда уже записаны его файлы.
//
// Параметры:
//  Ссылка	 - ДокументСсылка.ДокументРеализацииПолномочийНалоговыхОрганов - Входящее сообщение от ФНС
//  Файлы	 - Массив структур - Массив описания вложений документа - структура 
//       * Адрес - Строка - Адрес во временном хранилище
//       * ИмяФайла - Строка - Имя файла с расширением
//
Процедура ПослеЗаписиДокументаРеализацииПолномочийНалоговыхОрганов(Ссылка, Файлы) Экспорт
	СверкаСФНСПоИмущественнымНалогам.ПослеЗаписиДокументаРеализацииПолномочийНалоговыхОрганов(Ссылка, Файлы);
КонецПроцедуры

// Определяет наличие в конфигурации-потребителе механизма сверки имущественных налогов.
//
// Параметры:
//  РеализованаСверка - Булево - параметр будет установлен в Истина, если в конфигурации предусмотрена сверка
//
Процедура ПроверитьРеализованаСверкаИмущественныхНалогов(РеализованаСверка) Экспорт
	
КонецПроцедуры

// Указывает, поддерживает ли конфигурация тариф Промо ЕНС
//
// Параметры:
//  Поддерживает - Булево - Если конфигурация поддерживает тариф Промо ЕНС, то присваивать Поддерживает = Истина
//
Процедура КонфигурацияПоддерживаетТарифПромоЕНС(Поддерживает) Экспорт
	
КонецПроцедуры

// Указывает, поддерживает ли конфигурация возможность оформления платежных поручений
//
// Параметры:
//  ПоддерживаетСоздание - Булево
//  ПоддерживаетВыгрузку - Булево
//
Процедура КонфигурацияПоддерживаетПлатежныеПоручения(ПоддерживаетСоздание, ПоддерживаетВыгрузку) Экспорт
	
КонецПроцедуры

// Формирует документы вида "Платежное поручение" на основе переданных реквизитов
//
// Параметры:
//  ДокументКонтролирующегоОргана - Ссылка - ссылка на объект основание (справочник)
//  РеквизитыПлатежныхПоручений - Массив из Структура
//      * Организация - СправочникСсылка.Организации - плательщик
//      * КодНО - Строка - код налогового органа
//      * ИНН - Строка - ИНН организации, полученный в результате обработки исходных данных
//      * КПП - Строка - КПП организации
//      * Сумма - Число - сумма платежного поручения
//      * КБК - Строка - код бюджетной классификации
//      * ОКТМО - Строка
//      * Статус - Строка - статус платежного поручения
//      * УИН - Строка - идентификатор платежа
//      * БИК - Строка - код банка получателя
//      * БанкНаименование - Строка - наименование банка получателя
//      * КоррСчет - Строка - корреспондентский счет банка получателя
//      * РасчетныйСчет - Строка - расчетный счет получателя
//      * ИННПолучателя - Строка - ИНН получателя платежа
//      * КПППолучателя - Строка - КПП получателя платежа
//      * НаименованиеПолучателя - Строка - наименование получателя
//  МассивПлатежныхПоручений - Массив из Ссылка - ссылки на сформированные документы платежей в потребителе
//  ТекстОшибки - Строка - описание ошибки, если не удалось сфомировать документы
//
Процедура СформироватьПлатежныеПоручения(ДокументКонтролирующегоОргана, РеквизитыПлатежныхПоручений, МассивПлатежныхПоручений, ТекстОшибки) Экспорт
	
КонецПроцедуры

// Определяет, нужно ли скрывать элементы создания заявлений ЕГРЮЛ и ЕГРИП в форме 1С-Отчетность
//
// Параметры:
//  Скрыть	 - Булево - По умолчанию = Ложь
//
Процедура СкрытьЗаявленияЕГРЮЛ_ЕГРИП(Скрыть) Экспорт

КонецПроцедуры

// Обновляет уже созданные или создает новые задачи бухгалтера для требования ФНС.
//
// Параметры:
//  Организация	 - СправочникСсылка.Организации - организация
//  Дата		 - Дата - дата требования
//
Процедура ОбновитьИЗаполнитьТребованияФНС(Организация, Дата) Экспорт
	
КонецПроцедуры

// Обновляет статус по задаче с требованием ФНС.
//
// Параметры:
//  Ссылка - СправочникСсылка.ДокументыРеализацииПолномочийНалоговыхОрганов
//
Процедура ЗарегистрироватьИзменениеСтатусаЗадачТребованиеФНС(Ссылка) Экспорт
	
КонецПроцедуры

// По ссылке получает массив ссылок на объекты, которые отправляются в гос. органы
//
// Параметры:
//  Ссылка	 - ДокументСсылка, СправочникСсылка - документ или справочник, отображаемый в списке Отчеты формы 1С-Отчетность
//  ОтправляемыеОбъекты - Массив из объектов типа ОпределяемыйТип.ПредметЦиклаОбмена или пустой массив - содержит массив ссылок на отправляемые объекты
// 
//
Процедура ПолучитьОтправляемыйОбъектПоСсылке(Ссылка, ОтправляемыеОбъекты) Экспорт

КонецПроцедуры

// Процедура предназначена для определения, что организация является плательщиком НДС на текущий момент
//
// Параметры:
//  Организация	 - СправочникСсылка.Организации - организация
//  Является	 - Булево, Неопределено - Параметры, в который возвращается результат.
//                 Булево, если достаточно информации для определения необходимости, Неопределено - если недостаточно
//
Процедура ЯвляетсяПлательщикомНДС(Организация, Является) Экспорт
	
	Если Не ЗначениеЗаполнено(Организация) Тогда
		Возврат;
	КонецЕсли;
	
	Является = УчетнаяПолитика.ПлательщикНДС(Организация, ТекущаяДатаСеанса());
	
КонецПроцедуры

// Процедура предназначена для определения среднесписочной численности организации.
// Если организация - это головная организация, то возвращать численность по головной организации + по всем обособкам.
// Если организация является обособленным подразделением, то возвращать численность только по данной обособке.
//
// Параметры:
//  Организация	 - СправочникСсылка.Организации - организация
//  ДатаНачала		 - Дата - Начальная дата, на которую определяется среднесписочная численность
//  ДатаОкончания	 - Дата - Конечная дата, на которую определяется среднесписочная численность
//  Численность		 - Число, Неопределено - Параметры, в который возвращается результат.
//                     Число, если достаточно информации для определения необходимости, Неопределено - если недостаточно
//
Процедура СреднесписочнаяЧисленность(Организация, ДатаНачала, ДатаОкончания, Численность) Экспорт
	
	Если Не ЗначениеЗаполнено(Организация) Или Не ЗначениеЗаполнено(ДатаНачала) Или Не ЗначениеЗаполнено(ДатаОкончания) Тогда
		Возврат;
	КонецЕсли;
	
	СведенияОчисленности             = СтатистикаПерсонала.СведенияОЧисленности();
	ПараметрыДляСведенийОЧисленности = СтатистикаПерсонала.ПараметрыДляСведенийОЧисленности();
	
	ПараметрыДляСведенийОЧисленности.Организация           = Организация;
	ПараметрыДляСведенийОЧисленности.ДатаНачала            = ДатаНачала;
	ПараметрыДляСведенийОЧисленности.ДатаОкончания         = ДатаОкончания;
	ПараметрыДляСведенийОЧисленности.ПоГоловнойОрганизации =
		ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Организация, "ГоловнаяОрганизация") = Организация;
	
	СтатистикаПерсонала.ЗаполнитьСведенияОЧисленности(СведенияОчисленности, ПараметрыДляСведенийОЧисленности);
	
	Численность = СведенияОчисленности.Итог("СреднесписочнаяЧисленностьСотрудников");
	
КонецПроцедуры

// Процедура предназначена для определения численности сотрудников организации.
// Если организация - это головная организация, то возвращать численность по головной организации + по всем обособкам.
// Если организация является обособленным подразделением, то возвращать численность только по данной обособке.
//
// Параметры:
//  Организация	 - СправочникСсылка.Организации - организация
//  Дата		 - Дата - Дата, на которую определяется численность
//  Численность	 - Число, Неопределено - Параметры, в который возвращается результат.
//                 Число, если достаточно информации для определения необходимости, Неопределено - если недостаточно
//
Процедура ЧисленностьСотрудников(Организация, Дата, Численность) Экспорт
	
	Если Не ЗначениеЗаполнено(Организация) Или Не ЗначениеЗаполнено(Дата) Тогда
		Возврат;
	КонецЕсли;
	
	СведенияОчисленности             = СтатистикаПерсонала.СведенияОЧисленности();
	ПараметрыДляСведенийОЧисленности = СтатистикаПерсонала.ПараметрыДляСведенийОЧисленности();
	
	ПараметрыДляСведенийОЧисленности.Организация           = Организация;
	ПараметрыДляСведенийОЧисленности.ДатаНачала            = Дата;
	ПараметрыДляСведенийОЧисленности.ДатаОкончания         = Дата;
	ПараметрыДляСведенийОЧисленности.ПоГоловнойОрганизации =
		ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Организация, "ГоловнаяОрганизация") = Организация;
	
	СтатистикаПерсонала.ЗаполнитьСведенияОЧисленности(СведенияОчисленности, ПараметрыДляСведенийОЧисленности);
	
	Численность = СведенияОчисленности.Итог("ЧисленностьСотрудников");
	
КонецПроцедуры

// Процедура для определения, что у организации есть обязанность подавать определенный отчет на определенную дату.
// Результат этого метода будет использоваться как значение по-умолчанию для определения необходимости эл. документооборота
//
// Например, отчет 6-НДФЛ должны сдавать организации и индивидуальные предприниматели (налоговые агенты), 
// если они выплачивают доходы физлицам, а именно:
// • российские организации;
// • обособленные подразделения иностранных организаций в РФ;
// • индивидуальные предприниматели и физические лица, занимающиеся частной практикой, например,
// нотариусы и адвокаты (в отношении их работников).
//
// Параметры:
//  Организация	 - СправочникСсылка.Организации - организация
//  Отчет		 - Строка - Имя вида отчета, одно из:
//                 - Форма6_НДФЛ, если это отчет 6-НДФЛ (с 2021 года)
//                 - РасчетПоСтраховымВзносам, если это отчет Расчет по страховым взносам (ФНС)
//                 - ПерсонифицированныеСведенияОФизическихЛицах, если это отчет Персонифицированные сведения о физических лицах (ФНС)
//                 - ЖурналУчетаСчетовФактур, если это журнал учета счетов-фактур для передачи в электронном виде (ФНС)
//  Обязана		 - Булево, Неопределено - Параметры, в который возвращается результат.
//                 Булево, если достаточно информации для определения необходимости, Неопределено - если недостаточно
//
Процедура ОрганизацияОбязанаСдаватьОтчет(Организация, Отчет, Обязана) Экспорт
	
КонецПроцедуры

#КонецОбласти