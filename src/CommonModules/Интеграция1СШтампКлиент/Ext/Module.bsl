
#Область ПрограммныйИнтерфейс

// Возвращает через описание оповещения результат установки штампов в документ.
//
// Параметры:
//  ОписаниеОповещенияОВыполнении  - ОписаниеОповещения - Данные процедуры в которую необходимо вернуть результат
//                                                        выполнения функции.
//  ПараметрыУстановкиШтампов      - см. Интеграция1СШтампКлиентСервер.НовыеПараметрыШтампированияФайлаДокумента.
//  ПользовательскийСценарий       - Строка - Строковое описание без пробелов (максимум 250 символов),
//     информирующее о месте использования механики 1С:Штамп внутри конфигурации. Рекомендуется указывать условный путь
//     к ключевому интерфейсу или механизму, который использует механики 1С:Штамп с описанием события использования.
//     
//     Примеры:
//      - "БЭД.ИнтерфейсДокументовЭДО.ТекущиеДелаПоЭДО.ПредпросмотрПриАктивизацииСтроки"
//      - "БЭД.ДемоШтампированиеФайлов.ВизуализацияПроштампированногоЭлектронногоДокумента"
//      - "Документ.СчетНаОплату.ПечатьСчетаНаОплатуКонтрагенту"
//      - "РегламентноеЗадание.ВыгрузкаЭлектронныхДокументов"
//     
//  Таймаут - Число, Неопределено  - Максимальное время ожидания получения результата выполнения задания из сервиса.
//                                    По умолчанию - 600 сек.
//  ПараметрыОжидания              - см. ДлительныеОперацииКлиент.ПараметрыОжидания
//  
// Пример:
// 
//  МассивШтампов = Новый Массив;
//
//  МассивШтампов.Добавить(ДвоичныеДанныеШтампа);
//  ПараметрыШтампов = ПараметрыШтампов(МассивШтампов);
//
//  ПараметрыУстановкиШтамповВДокумент = Интеграция1СШтампКлиентСервер.НовыеПараметрыШтампированияФайлаДокумента();
//
//  ПараметрыУстановкиШтамповВДокумент.ПараметрыДокумента.ДвоичныеДанные   = ДвоичныеДанныеДокумента;
//  ПараметрыУстановкиШтамповВДокумент.ПараметрыДокумента.Расширение       = "pdf";
//  ПараметрыУстановкиШтамповВДокумент.ПараметрыШтампов.ПоПозиционированию = ПараметрыШтампов;
//
//  Сценарий = "БЭД.ИнтерфейсДокументовЭДО.ТекущиеДелаПоЭДО.ПредпросмотрПриАктивизацииСтроки";
//  ОписаниеОповещения = Новый ОписаниеОповещения("РезультатУстановкиШтамповВДокумент", ЭтотОбъект);
//
//  Интеграция1СШтампКлиент.УстановитьШтампВДокумент(
//    ОписаниеОповещения,
//    ПараметрыУстановкиШтамповВДокумент,
//    Сценарий,
//    600);
//
// Если требуется получить результат в формате PDF/A, то в свойстве "ПараметрыУстановкиШтамповВДокумент.ПараметрыРезультата.ФорматРезультата"
// необходимо указать одну из поддерживаемых версий PDF формата: pdf_a_1, pdf_a_2, pdf_a_3.
//
// Пример:
// 
// МассивШтампов = Новый Массив;
//
// МассивШтампов.Добавить(ДвоичныеДанныеШтампа);
// ПараметрыШтампов = ПараметрыШтампов(МассивШтампов);
//
// ПараметрыУстановкиШтамповВДокумент = Интеграция1СШтампКлиентСервер.НовыеПараметрыШтампированияФайлаДокумента();
//
// ПараметрыУстановкиШтамповВДокумент.ПараметрыДокумента.ДвоичныеДанные   = ДвоичныеДанныеДокумента;
// ПараметрыУстановкиШтамповВДокумент.ПараметрыДокумента.Расширение       = "pdf";
// ПараметрыУстановкиШтамповВДокумент.ПараметрыШтампов.ПоПозиционированию = ПараметрыШтампов;
//
// ПараметрыУстановкиШтамповВДокумент.ПараметрыРезультата.ФорматРезультата = "pdf_a_1";
//
// Сценарий = "БЭД.ИнтерфейсДокументовЭДО.ТекущиеДелаПоЭДО.ПредпросмотрПриАктивизацииСтроки";
//
// Интеграция1СШтамп.РезультатУстановкиШтамповВДокумент(
//   ПараметрыУстановкиШтамповВДокумент,
//   Сценарий,
//   600);
//
Процедура УстановитьШтампыВДокумент(Знач ОписаниеОповещенияОВыполнении,
	Знач ПараметрыУстановкиШтампов,
	Знач ПользовательскийСценарий,
	Знач Таймаут = Неопределено,
	Знач ПараметрыОжидания = Неопределено) Экспорт
	
	// Асинхронный режим
	// Получаем результат проштамповки в 3 этапа:
	//  1. Отправляем запрос в сервис на добавление штампа. В сервисе формируется задание в очереди,
	//     которое будет выполнено в течение какого-то времени
	//  2. Отправляем запрос на получение статуса выполнения задания.
	//  3. Получаем результат выполнения задания. Результат отправляем в процедуру описания оповещения о выполнении.
	
	Интеграция1СШтампСлужебныйКлиент.УстановитьШтампыВДокумент(ОписаниеОповещенияОВыполнении,
		ПараметрыУстановкиШтампов,
		ПользовательскийСценарий,
		Таймаут,
		ПараметрыОжидания);
	
КонецПроцедуры

#КонецОбласти
