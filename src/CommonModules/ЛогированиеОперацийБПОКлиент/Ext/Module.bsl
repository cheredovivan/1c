///////////////////////////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 2024, ООО 1С-Софт
// Все права защищены. Эта программа и сопроводительные материалы предоставляются 
// в соответствии с условиями лицензии Attribution 4.0 International (CC BY 4.0)
// Текст лицензии доступен по ссылке:
// https://creativecommons.org/licenses/by/4.0/legalcode
///////////////////////////////////////////////////////////////////////////////////////////////////////

#Область ПрограммныйИнтерфейс

// Выполняет обновление параметров логирования подключаемого оборудования, данные обновляются
// из процедуры ПриОпределенииПараметровЛогированияПодключаемогоОборудования.
Процедура ОбновитьПараметрыЛогированияОперацийСПодключаемымОборудованием() Экспорт
	
	Параметры = ЛогированиеОперацийБПОСлужебныйВызовСервера.ПараметрыЛогированияОперацийСОборудованием();
	ПодключаемоеОборудование = МенеджерОборудованияКлиент.ПодключаемоеОборудование();
	ПодключаемоеОборудование.СистемаЛогирования = НоваяСистемаЛогирования(Параметры);
	
КонецПроцедуры

// Открытие форму списка операций проверки КМ
//
// Параметры:
//  ПараметрКоманды - Произвольный - источник, в котором реализована команда
//  ПараметрыВыполненияКоманды - ПараметрыВыполненияКоманды
//
Процедура ОткрытьОперацииСОборудованием(ПараметрКоманды, ПараметрыВыполненияКоманды) Экспорт
	
	// ++ НеМобильноеПриложение
#Если Не МобильноеПриложениеКлиент Тогда 
	// Замер производительности.
	КлючеваяОперация = "ОбщийМодуль.ЛогированиеОперацийБПОКлиент.ОткрытьОперацииСОборудованием";
	ОбщегоНазначенияБПОКлиент.ЗамерВремениБПО(КлючеваяОперация, Неопределено, Ложь, Истина);
#КонецЕсли
	
	ПараметрыФормы = Новый Структура();
	ОткрытьФорму("РегистрСведений.ОперацииСПодключаемымОборудованием.ФормаСписка", 
		ПараметрыФормы, 
		ПараметрыВыполненияКоманды.Источник, 
		ПараметрыВыполненияКоманды.Уникальность, 
		ПараметрыВыполненияКоманды.Окно);
	// -- НеМобильноеПриложение
	
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныйПрограммныйИнтерфейс

Функция НоваяЗаписьЛога() Экспорт
	
	Результат = Новый Структура();
	Результат.Вставить("Оборудование", Неопределено);
	Результат.Вставить("Дата", Неопределено);
	Результат.Вставить("НомерОперации",0);
	Результат.Вставить("ВходящиеПараметры", Новый Структура());
	Результат.Вставить("ИсходящиеПараметры", Новый Структура());
	Результат.Вставить("ИдентификаторыПараметров", "");
	Результат.Вставить("Таймкод", 0);
	Результат.Вставить("ВремяВыполнения", 0);
	Результат.Вставить("ТипЗаписи", "");
	Результат.Вставить("РевизияИнтерфейса", 0);
	Результат.Вставить("ВерсияДрайвера", "");
	Результат.Вставить("ВерсияКомпонента", "");
	Результат.Вставить("Операция", "");
	Результат.Вставить("ПредставлениеОперации", "");
	Результат.Вставить("ИДУстройства", "");
	Результат.Вставить("КодОшибки", 0);
	Результат.Вставить("ТекстОшибки", "");
	Результат.Вставить("Результат", Ложь);
	Возврат Результат
	
КонецФункции

Функция НоваяСистемаЛогирования(Параметры) Экспорт
	
	Если Параметры = Неопределено Тогда
		Возврат Неопределено;
	КонецЕсли;
	
	Если Параметры.ИспользоватьЛогирование Тогда
		Результат = Новый Структура();
		Результат.Вставить("ИнтервалПереносаНаСервер", 60);
		Результат.Вставить("ПоследнийПереносНаСервер", 0);
		Результат.Вставить("ТипыОборудования", Новый Структура());
		Результат.Вставить("НомерОперации", 0);
		Результат.Вставить("Записи", Новый Массив());
		Результат.Вставить("ТекущаяЗапись", Неопределено);
		Результат.Вставить("Модуль", ЭтотОбъект);
		Результат.Вставить("ОписанияОпераций", Новый Соответствие());
		СформироватьОписаниеОпераций(Результат);
		
		Результат.ИнтервалПереносаНаСервер = Параметры.ИнтервалПереносаНаСервер;
		МинимальныйИнтервалПереноса = 60;
		Если Результат.ИнтервалПереносаНаСервер < МинимальныйИнтервалПереноса Тогда
			Результат.ИнтервалПереносаНаСервер = МинимальныйИнтервалПереноса;
		КонецЕсли;
	Иначе 
		Результат = Неопределено;
	КонецЕсли;
	
	Возврат Результат;
	
КонецФункции

Функция НачатьЗаписьЛогаОперации(СистемаЛогирования, ПараметрыПодключения, Операция, ЗначенияПараметров = Неопределено, ИдентификаторыСтруктуры = "") Экспорт
	
	Запись = НоваяЗаписьЛога();
	Запись.Дата = ТекущаяДата();
	Запись.Таймкод = ТекущаяУниверсальнаяДатаВМиллисекундах();
	СистемаЛогирования.НомерОперации = СистемаЛогирования.НомерОперации + 1;
	Запись.НомерОперации = СистемаЛогирования.НомерОперации;
	Если ПараметрыПодключения <> Неопределено Тогда
		Запись.Оборудование = ПараметрыПодключения.ИдентификаторУстройства;
		Если ПараметрыПодключения.Свойство("ИДУстройства") Тогда
			Запись.ИДУстройства = ПараметрыПодключения.ИДУстройства;
		КонецЕсли;
		Запись.ВерсияДрайвера = ПараметрыПодключения.ВерсияДрайвера;
		Запись.РевизияИнтерфейса = ПараметрыПодключения.РевизияИнтерфейса;
	КонецЕсли;
	Запись.Операция = Операция;
	
	ОписаниеОперации = ОписаниеКоманды(СистемаЛогирования, Операция);
	Если ОписаниеОперации = Неопределено Тогда
		Запись.ПредставлениеОперации = Операция;
	Иначе
		Запись.ПредставлениеОперации = ?(ПустаяСтрока(ОписаниеОперации.ОперацияЛокализация), ОписаниеОперации.Операция, ОписаниеОперации.ОперацияЛокализация);
	КонецЕсли;
	
	Если ЗначенияПараметров <> Неопределено Тогда
		ТипЗначенияПараметров = ТипЗнч(ЗначенияПараметров);
		Если ТипЗначенияПараметров = Тип("Массив") Тогда
			ЗаписатьПараметрыВходящихИзМассива(СистемаЛогирования, Запись, ЗначенияПараметров);
		ИначеЕсли ТипЗначенияПараметров= Тип("Структура") Тогда
			Если ПустаяСтрока(ИдентификаторыСтруктуры) Тогда
				Запись.ВходящиеПараметры = ЗначенияПараметров;
			Иначе
				ЗаписатьПараметрыВходящихИзСтруктуры(СистемаЛогирования, Запись, ЗначенияПараметров, ИдентификаторыСтруктуры);
			КонецЕсли;
		Иначе
			Запись.ВходящиеПараметры.Вставить(ИдентификаторыСтруктуры, ЗначенияПараметров);
		КонецЕсли;
	КонецЕсли;
	
	СистемаЛогирования.ТекущаяЗапись = Запись;
	Возврат Запись;
	
КонецФункции

Процедура ЗавершитьЗаписьЛогаОперации(СистемаЛогирования, Запись, РезультатВызова, ИдентификаторыИсходящихПараметров = "") Экспорт
	
	Если Запись = Неопределено Тогда
		Возврат;
	КонецЕсли;
	
	Запись.ВремяВыполнения = ТекущаяУниверсальнаяДатаВМиллисекундах() - Запись.Таймкод;
	Запись.ТипЗаписи = "Инфо";
	Если РезультатВызова = Неопределено Тогда
		
		Если Запись <> Неопределено Тогда
			Запись.ТипЗаписи = "Исключение";
			Запись.ТекстОшибки = ОбработкаОшибок.ПодробноеПредставлениеОшибки(ИнформацияОбОшибке());
			Запись.Результат = Ложь;
		КонецЕсли;
		
	ИначеЕсли ТипЗнч(РезультатВызова) = Тип("РезультатАсинхВызоваВнешнейКомпоненты") Тогда
		
		Если ТипЗнч(РезультатВызова.Значение) = Тип("Булево") Тогда
			Запись.Результат = РезультатВызова.Значение;
			ЗаписатьПараметрыИсходящихИзМассива(СистемаЛогирования, Запись, РезультатВызова.Параметры);
			Если ПустаяСтрока(Запись.ИДУстройства) И Запись.ИсходящиеПараметры.Свойство("DeviceID") Тогда
				Запись.ИДУстройства = Запись.ИсходящиеПараметры.DeviceID;
			КонецЕсли;
			Если Не Запись.Результат Тогда
				Запись.ТипЗаписи = "Ошибка";
			КонецЕсли;
			
		Иначе
			Запись.Результат = Истина;
			Запись.ИсходящиеПараметры = Новый Структура("Результат", РезультатВызова.Значение);
			
		КонецЕсли;
		
	ИначеЕсли ТипЗнч(РезультатВызова) = Тип("Булево") Тогда
		Запись.Результат = РезультатВызова;
		
	ИначеЕсли ТипЗнч(РезультатВызова) = Тип("Структура") Тогда
		Если РезультатВызова.Свойство("Подключено") Тогда
			Запись.Результат = РезультатВызова.Подключено;
		Иначе
			Запись.Результат = Истина;
		КонецЕсли;
		ЗаписатьПараметрыИсходящихИзСтруктуры(СистемаЛогирования, Запись, РезультатВызова, ИдентификаторыИсходящихПараметров);
		
	Иначе
		Запись.Результат = Истина;
		
	КонецЕсли;
	
	СистемаЛогирования.Записи.Добавить(Запись);
	
КонецПроцедуры

// Записать ошибку драйвера в лог операции.
// 
// Параметры:
//  СистемаЛогирования - Структура
//  Запись  - Структура
//  РезультатВызова - РезультатАсинхВызоваВнешнейКомпоненты
//
Процедура ЗаписатьОшибкуДрайвераВЛогОперации(СистемаЛогирования, Запись, РезультатВызова) Экспорт
	
	Если Запись <> Неопределено Тогда
		Запись.КодОшибки = РезультатВызова.Значение;
		Запись.Результат = Ложь;
		Если РезультатВызова.Параметры.Количество()>0 Тогда
			Запись.ТекстОшибки = РезультатВызова.Параметры[0];
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры

Процедура ЗаписатьОшибкуВЛогОперации(СистемаЛогирования, Запись, ОписаниеОшибки) Экспорт
	
	Если Запись <> Неопределено Тогда
		Запись.Результат = Ложь;
		Запись.ТекстОшибки = ОписаниеОшибки;
	КонецЕсли;
	
КонецПроцедуры

Функция ДанныеДляСервера() Экспорт
	
	СистемаЛогирования = ОбщегоНазначенияБПОКлиент.СистемаЛогирования();
	Если СистемаЛогирования = Неопределено Тогда
		Возврат Неопределено;
	КонецЕсли;
	
	Если СистемаЛогирования.Записи.Количество() = 0 Тогда
		Возврат Неопределено;
	КонецЕсли;
	
	Записи = СистемаЛогирования.Записи;
	СистемаЛогирования.Записи = Новый Массив();
	
	СистемаЛогирования.ПоследнийПереносНаСервер = ТекущаяУниверсальнаяДатаВМиллисекундах();
	Возврат Записи;
	
КонецФункции

Процедура ЗавершитьЗаписьЛогаИсключением(СистемаЛогирования, Запись, ТекстОшибки) Экспорт
	
	Если Запись = Неопределено Тогда
		Возврат;
	КонецЕсли;
	
	Запись.ВремяВыполнения = ТекущаяУниверсальнаяДатаВМиллисекундах() - Запись.Таймкод;
	Запись.ТипЗаписи = "Исключение";
	Запись.ТекстОшибки = ТекстОшибки;
	Запись.Результат = Ложь;
	
	СистемаЛогирования.НомерОперации = СистемаЛогирования.НомерОперации + 1;
	Запись.НомерОперации = СистемаЛогирования.НомерОперации;
	СистемаЛогирования.Записи.Добавить(Запись);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Функция ОписаниеКоманды(СистемаЛогирования, Команда, МаксимальнаяРевизия = 0)
	
	Описание = СистемаЛогирования.ОписанияОпераций.Получить(Команда);
	Если Описание <> Неопределено Тогда
		
		Если МаксимальнаяРевизия <> 0 Тогда
			Ревизия = НайтиВМассивеСтруктурЗначениеБольшеЧем(Описание.Ревизии, "НомерРевизии", МаксимальнаяРевизия);
			Если Ревизия <> Неопределено Тогда
				Возврат Ревизия;
			КонецЕсли;
		КонецЕсли;
		
	КонецЕсли;
	Возврат Описание;
	
КонецФункции

Процедура ЗаписатьПараметрыВходящихИзСтруктуры(СистемаЛогирования, Запись, ЗначенияПараметров, ИдентификаторыПараметров)
	
	Операция = Запись.Операция;
	Ревизия  = Запись.РевизияИнтерфейса;
	Описание = ОписаниеКоманды(СистемаЛогирования, Операция, Ревизия);
	Если Описание = Неопределено Тогда
		ИдентификаторыЛогирования = Новый Массив();
	Иначе
		ИдентификаторыЛогирования = Описание.ИдентификаторыВходящих;
	КонецЕсли;
	Параметры = Запись.ВходящиеПараметры;
	ЗаписатьПараметрыИзСтруктуры(ИдентификаторыЛогирования, Параметры, ЗначенияПараметров, ИдентификаторыПараметров);
	
КонецПроцедуры

Процедура ЗаписатьПараметрыИсходящихИзСтруктуры(СистемаЛогирования, Запись, ЗначенияПараметров, ИдентификаторыПараметров)
	
	Операция = Запись.Операция;
	Ревизия  = Запись.РевизияИнтерфейса;
	Описание = ОписаниеКоманды(СистемаЛогирования, Операция, Ревизия);
	Если Описание = Неопределено Тогда
		ИдентификаторыЛогирования = Новый Массив();
	Иначе
		ИдентификаторыЛогирования = Описание.ИдентификаторыИсходящих;
	КонецЕсли;
	Параметры = Запись.ИсходящиеПараметры;
	ЗаписатьПараметрыИзСтруктуры(ИдентификаторыЛогирования, Параметры, ЗначенияПараметров, ИдентификаторыПараметров);
	
КонецПроцедуры

Процедура ЗаписатьПараметрыИзСтруктуры(ИдентификаторыЛогирования, Параметры, ЗначенияПараметров, ИдентификаторыПараметров)
	
	ИдентификаторыСтруктуры = СтрРазделить(ИдентификаторыПараметров, ",", Истина);
	
	Индекс = 0;
	Для каждого ИдентификаторСтруктуры Из ИдентификаторыСтруктуры Цикл
		
		Если ПустаяСтрока(ИдентификаторСтруктуры) Тогда
			Индекс = Индекс + 1;
			Продолжить;
		КонецЕсли;
		
		Если Индекс < ИдентификаторыЛогирования.Количество() Тогда
			Идентификатор = ИдентификаторыЛогирования[Индекс];
		Иначе
			Идентификатор = СокрЛП(ИдентификаторСтруктуры);
		КонецЕсли;
		
		Значение = Неопределено;
		Если ЗначенияПараметров.Свойство(ИдентификаторСтруктуры, Значение) Тогда
			Если ПустаяСтрока(Идентификатор) Тогда
				Идентификатор = СтрШаблон(НСтр("ru = 'Параметр_%1';
												|en = 'Parameter_%1'"), Индекс);
			КонецЕсли;
			
			Если ТипЗнч(Значение) = Тип("Строка") 
				И ОбработкаСтрокиXML.НайтиНедопустимыеСимволыXML(Значение, 1) > 0 Тогда
				Значение = ЗаписатьЗначениеJSON(Значение);
			КонецЕсли;
			Параметры.Вставить(Идентификатор, Значение);
		КонецЕсли;
		Индекс = Индекс + 1;
		
	КонецЦикла;
	
КонецПроцедуры

Процедура ЗаписатьПараметрыВходящихИзМассива(СистемаЛогирования, Запись, ЗначенияПараметров)
	
	Операция = Запись.Операция;
	Ревизия  = Запись.РевизияИнтерфейса; 
	Описание = ОписаниеКоманды(СистемаЛогирования, Операция, Ревизия);
	Если Описание = Неопределено Тогда
		ИдентификаторыЛогирования = Неопределено;
	Иначе
		ИдентификаторыЛогирования = Описание.ИдентификаторыВходящих;
	КонецЕсли;
	Параметры = Запись.ВходящиеПараметры;
	
	ЗаписатьПараметрыИзМассива(ИдентификаторыЛогирования, Параметры, ЗначенияПараметров);
	
КонецПроцедуры

Процедура ЗаписатьПараметрыИсходящихИзМассива(СистемаЛогирования, Запись, ЗначенияПараметров)
	
	Операция = Запись.Операция;
	Ревизия  = Запись.РевизияИнтерфейса;
	Описание = ОписаниеКоманды(СистемаЛогирования, Операция, Ревизия);
	Если Описание = Неопределено Тогда
		ИдентификаторыЛогирования = Неопределено;
	Иначе
		ИдентификаторыЛогирования = Описание.ИдентификаторыИсходящих;
	КонецЕсли;
	Параметры = Запись.ИсходящиеПараметры;
	
	ЗаписатьПараметрыИзМассива(ИдентификаторыЛогирования, Параметры, ЗначенияПараметров);
	
КонецПроцедуры

Процедура ЗаписатьПараметрыИзМассива(ИдентификаторыЛогирования, Параметры, ЗначенияПараметров)
	
	Индекс = 0;
	Для Каждого Значение Из ЗначенияПараметров Цикл
		
		Если ТипЗнч(Значение) = Тип("Строка") 
			И ОбработкаСтрокиXML.НайтиНедопустимыеСимволыXML(Значение, 1) > 0 Тогда
			Значение = ЗаписатьЗначениеJSON(Значение);
		КонецЕсли;
		Если ИдентификаторыЛогирования = Неопределено Тогда
			Идентификатор = СтрШаблон(НСтр("ru = 'Параметр_%1';
											|en = 'Parameter_%1'"), Индекс);
			Параметры.Вставить(СокрЛП(Идентификатор), Значение);
		ИначеЕсли Индекс < ИдентификаторыЛогирования.Количество() Тогда
			Идентификатор = СокрЛП(ИдентификаторыЛогирования[Индекс]);
			Если ЗначениеЗаполнено(Идентификатор) Тогда
				Параметры.Вставить(Идентификатор, Значение);
			КонецЕсли;
		КонецЕсли;
		Индекс = Индекс + 1;
	
	КонецЦикла;
	
КонецПроцедуры

Функция НайтиВМассивеСтруктурЗначениеБольшеЧем(Массив, Идентификатор, Значение)
	
	Для каждого Элемент Из Массив Цикл
	
		Если Элемент[Идентификатор] > Значение Тогда
			Возврат Элемент;
		КонецЕсли;
	
	КонецЦикла;
	
	Возврат Неопределено;
	
КонецФункции

Функция НайтиВМассивеСтруктурЗначениеНеБольшеЧем(Массив, Идентификатор, ЗначениеПоиска, НайденныйИндекс = 0)
	
	Найдено = Неопределено;
	Элемент = Неопределено;
	НайденныйИндекс = 0;
	Для Индекс = 0 По Массив.ВГраница() Цикл
		Найдено = Элемент;
		Элемент = Массив[Индекс];
		Если Элемент[Идентификатор] >= ЗначениеПоиска Тогда
			Прервать;
		КонецЕсли;
		НайденныйИндекс = Индекс;
	КонецЦикла;
	Возврат Найдено;
	
КонецФункции

Процедура ДобавитьОперацию(СистемаЛогирования, МаксимальнаяРевизия, Операция, ОперацияЛокализация, 
	ИдентификаторыВходящих, ИдентификаторыВходящихЛокализация, ИдентификаторыИсходящих, ИдентификаторыИсходящихЛокализация)
	
	Описание = СистемаЛогирования.ОписанияОпераций.Получить(Операция);
	Если Описание = Неопределено Тогда
		Описание = Новый Структура();
		Описание.Вставить("ОперацияЛокализация", ОперацияЛокализация);
		Описание.Вставить("ИдентификаторыВходящих", Новый Массив());
		Описание.Вставить("ИдентификаторыИсходящих", Новый Массив());
		Описание.Вставить("ИдентификаторыВходящихЛокализация", Новый Массив());
		Описание.Вставить("ИдентификаторыИсходящихЛокализация", Новый Массив());
		Описание.Вставить("Ревизии", Новый Массив());
	КонецЕсли;
	
	Если МаксимальнаяРевизия = 0 Тогда
		Описание.ИдентификаторыВходящих = СтрРазделить(ИдентификаторыВходящих,",",Истина);
		Описание.ИдентификаторыИсходящих = СтрРазделить(ИдентификаторыИсходящих,",",Истина);
		Описание.ИдентификаторыВходящихЛокализация = СтрРазделить(ИдентификаторыВходящихЛокализация,",",Истина);
		Описание.ИдентификаторыИсходящихЛокализация = СтрРазделить(ИдентификаторыИсходящихЛокализация,",",Истина);
	Иначе
		Индекс = 0;
		Ревизии = Описание.Ревизии;
		НайденнаяРевизия = НайтиВМассивеСтруктурЗначениеНеБольшеЧем(Ревизии, "НомерРевизии", МаксимальнаяРевизия, Индекс);
		Если НайденнаяРевизия = Неопределено Тогда
			ИндексВставки = 0;
		Иначе
			ИндексВставки = Индекс + 1;
		КонецЕсли;
		Ревизия = Новый Структура();
		Ревизия.Вставить("НомерРевизии", МаксимальнаяРевизия);
		Ревизия.Вставить("ИдентификаторыВходящих", СтрРазделить(ИдентификаторыВходящих,",",Истина));
		Ревизия.Вставить("ИдентификаторыИсходящих", СтрРазделить(ИдентификаторыИсходящих,",",Истина));
		Ревизия.Вставить("ИдентификаторыВходящихЛокализация", СтрРазделить(ИдентификаторыВходящих,",",Истина));
		Ревизия.Вставить("ИдентификаторыИсходящихЛокализация", СтрРазделить(ИдентификаторыИсходящих,",",Истина));
		Ревизии.Вставить(ИндексВставки, Ревизия);
	КонецЕсли;
	СистемаЛогирования.ОписанияОпераций.Вставить(Операция, Описание);
	
КонецПроцедуры

Процедура СформироватьОписаниеОпераций(СистемаЛогирования)
	
	// 2. Обязательные функции и методы, связанные с использованием драйвера подключаемого оборудования в системе
	ДобавитьОперацию(СистемаЛогирования, 0, "GetInterfaceRevision", НСтр("ru = 'Получить ревизию интерфейса';
																		|en = 'Get an interface revision'"), "", "", "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "GetDescription", НСтр("ru = 'Получить описание';
																	|en = 'Get details'"), "", "", "DriverDescription", НСтр("ru = 'Описание драйвера';
																																	|en = 'Driver details'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "GetLastError", НСтр("ru = 'Получить ошибку';
																|en = 'Get an error'"), "", "", "ErrorDescription", НСтр("ru = 'Описание ошибки';
																															|en = 'Error details'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "EquipmentParameters", НСтр("ru = 'Параметры оборудования';
																		|en = 'Peripheral parameters'"), "EquipmentType, ", НСтр("ru = 'Тип оборудования,';
																																	|en = 'Тип оборудования,'"), ", TableParameters", НСтр("ru = ', Таблица параметров';
																																														|en = ', Parameter table'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "ConnectEquipment", НСтр("ru = 'Подключить оборудование';
																	|en = 'Connect peripherals'"), ", EquipmentType, ConnectionParameters", НСтр("ru = ', Тип оборудования, Параметры подключения';
																																						|en = ', Peripheral type, Connection parameters'"), "DeviceID, , ", НСтр("ru = 'ИД устройства, ,';
																																																								|en = 'ИД устройства, ,'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "DisconnectEquipment", НСтр("ru = 'Отключить оборудование';
																		|en = 'Disconnect peripherals'"), "DeviceID", НСтр("ru = 'ИД устройства';
																															|en = 'ИД устройства'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "EquipmentTest", НСтр("ru = 'Тестирования оборудования';
																	|en = 'Peripheral testing'"), "EquipmentType, ConnectionParameters, , ", НСтр("ru = 'Тип оборудования, Параметры подключения, ,';
																																						|en = 'Тип оборудования, Параметры подключения, ,'"), ", , Description, DemoModeIsActivated", НСтр("ru = ', , Описание, Активирован демо режим';
																																																															|en = ', , Details, Demo profile is activated'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "EquipmentAutoSetup", НСтр("ru = 'Автонастройка оборудования';
																		|en = 'Equipment autosetup'"), ", ConnectionParameters, , ShowAutoSetupWindow, Timeout", НСтр("ru = ', Параметры подключения, , Показывать окно автонастройки, Таймаут';
																																											|en = ', Connection parameters, , Show autosetup window, Timeout'"), "EquipmentType, , ConnectionParameters, , ", НСтр("ru = 'Тип оборудования, , Параметры подключения, ,';
																																																																											|en = 'Тип оборудования, , Параметры подключения, ,'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "SetApplicationInformation", НСтр("ru = 'Установить информацию приложения';
																				|en = 'Set application information'"), "ApplicationSettings", НСтр("ru = 'Параметры приложения';
																																						|en = 'Application parameters'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "GetAdditionalActions", НСтр("ru = 'Получить дополнительные действия';
																		|en = 'Get additional actions'"), "", "", "TableActions", НСтр("ru = 'Таблица действий';
																																					|en = 'Action table'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "DoAdditionalAction", НСтр("ru = 'Выполнить дополнительное действие';
																		|en = 'Perform an additional action'"), "ActionName", НСтр("ru = 'Имя действия';
																																		|en = 'Action name'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "GetLocalizationPattern", НСтр("ru = 'Получить шаблон локализации';
																			|en = 'Get a localization template'"), "", "", "LocalizationPattern", НСтр("ru = 'Шаблон локализации';
																																						|en = 'Localization template'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "SetLocalization", НСтр("ru = 'Установить локализацию';
																	|en = 'Set localization'"), "LanguageCode, LocalizationPattern", НСтр("ru = 'Код языка, Шаблон локализации';
																																				|en = 'Language code, Localization template'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "GetParameters", НСтр("ru = 'Получить параметры';
																	|en = 'Get parameters'"), "", "", "TableParameters", НСтр("ru = 'Таблица параметров';
																																|en = 'Parameter table'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "SetParameter", НСтр("ru = 'Установить параметр';
																|en = 'Set the parameter'"), "Name, Value", НСтр("ru = 'Имя, Значение';
																													|en = 'Name, Value'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "Open", НСтр("ru = 'Подключить';
														|en = 'Connect'"), "", "", "DeviceID", НСтр("ru = 'ИД устройства';
																										|en = 'ИД устройства'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "Close", НСтр("ru = 'Отключить';
															|en = 'Disconnect'"), "DeviceID", НСтр("ru = 'ИД устройства';
																								|en = 'ИД устройства'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "DeviceTest", НСтр("ru = 'Тест устройства';
																|en = 'Device test'"), "", "", "Description, DemoModeIsActivated", НСтр("ru = 'Описание, Активирован демо режим';
																																			|en = 'Details, Demo profile is activated'"));
	
	// 3.1. Требования к разработке драйверов для электронных весов
	ДобавитьОперацию(СистемаЛогирования, 0, "ScaleOptions", НСтр("ru = 'Параметры весов';
																|en = 'Scales parameters'"), "DeviceID, ", НСтр("ru = 'ИД устройства,';
																												|en = 'ИД устройства,'"), ", ScaleOptions", НСтр("ru = ', Параметры весов';
																																								|en = ', Scales parameters'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "Calibrate", НСтр("ru = 'Установить вес тары';
																|en = 'Set the package weight'"), "DeviceID, TareWeight", НСтр("ru = 'ИД устройства, Вес тары';
																															|en = 'ИД устройства, Вес тары'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "GetWeight", НСтр("ru = 'Получить вес';
																|en = 'Receive weight'"), "DeviceID, ", НСтр("ru = 'ИД устройства,';
																										|en = 'ИД устройства,'"), ", Weight", НСтр("ru = ', Текущий вес';
																																					|en = ', Current weight'"));
	
	// 3.2. Требования к разработке драйверов для электронных весов с печатью этикеток в режиме "OFFLINE"
	ДобавитьОперацию(СистемаЛогирования, 0, "UploadGoods", НСтр("ru = 'Выгрузить товары';
																|en = 'Export goods'"), "DeviceID, GoodsTable, PackageStatus", НСтр("ru = 'ИД устройства, Таблица товаров, Статус пакета';
																																		|en = 'ИД устройства, Таблица товаров, Статус пакета'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "ClearGoods", НСтр("ru = 'Очистить товары';
																|en = 'Clear goods'"), "DeviceID", НСтр("ru = 'ИД устройства';
																											|en = 'ИД устройства'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "UploadProductImages", НСтр("ru = 'Выгрузить изображения товаров';
																		|en = 'Export goods images'"), "DeviceID, TableImages, PackageStatus", НСтр("ru = 'ИД устройства, Таблица изображений, Статус пакета';
																																								|en = 'ИД устройства, Таблица изображений, Статус пакета'"), "", "");
	
	// 3.3. Требования к разработке драйверов для дисплеев покупателя
	ДобавитьОперацию(СистемаЛогирования, 0, "StringOutputOnCustomerDisplay", НСтр("ru = 'Вывести строку на дисплей покупателя';
																					|en = 'Show the line on the customer display'"), "DeviceID, Strings", НСтр("ru = 'ИД устройства, Строки';
																																							|en = 'ИД устройства, Строки'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "ClearCustomerDisplay", НСтр("ru = 'Очистить дисплей покупателя';
																		|en = 'Clear the customer display'"), "DeviceID", НСтр("ru = 'ИД устройства';
																																|en = 'ИД устройства'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "OutputHTML", НСтр("ru = 'Вывести HTML';
																|en = 'Output HTML'"), "DeviceID, HTML", НСтр("ru = 'ИД устройства, HTML';
																												|en = 'ИД устройства, HTML'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "QRCodeOutputOnCustomerDisplay", НСтр("ru = 'Вывести QR код на дисплей покупателя';
																					|en = 'Вывести QR код на дисплей покупателя'"), "DeviceID, QRCodeValue, QRСodePicture", НСтр("ru = 'ИД устройства, Значение QR кода, Картинка QR кода';
																																												|en = 'Device ID, QR code value, QR code picture'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "DisplayOperationStatus", НСтр("ru = 'Отобразить статус операции';
																			|en = 'Display the transaction status'"), "DeviceID, OperationStatus", НСтр("ru = 'ИД устройства, Статус операции';
																																					|en = 'ИД устройства, Статус операции'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "DisplayWorkplaceStatus", НСтр("ru = 'Отобразить статус рабочего места';
																			|en = 'Display the workplace status'"), "DeviceID, WorkplaceStatus, SoundSignal", НСтр("ru = 'ИД устройства, Статус рабочего места, Звуковой сигнал';
																																										|en = 'ИД устройства, Статус рабочего места, Звуковой сигнал'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "GetCustomerDisplayOptions", НСтр("ru = 'Получить параметры дисплея покупателя';
																				|en = 'Get customer display parameters'"), "DeviceID, ", НСтр("ru = 'ИД устройства,';
																																					|en = 'ИД устройства,'"), ", CustomerDisplayOptions", НСтр("ru = ', Параметры дисплея покупателя';
																																																			|en = ', Customer display parameters'"));
	
	// 3.4. Требования к разработке драйверов для терминалов сбора данных
	ДобавитьОперацию(СистемаЛогирования, 0, "UploadTable", НСтр("ru = 'Выгрузить таблицу';
																|en = 'Export the table'"), "DeviceID, GoodsTable, PackageStatus", НСтр("ru = 'ИД устройства, Таблица товаров, Статус пакета';
																																		|en = 'ИД устройства, Таблица товаров, Статус пакета'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "DownloadTable", НСтр("ru = 'Загрузить таблицу';
																	|en = 'Import table'"), "DeviceID, ", НСтр("ru = 'ИД устройства,';
																													|en = 'ИД устройства,'"), ", DownloadTable", НСтр("ru = ', Таблица загрузки';
																																									|en = ', Import table'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "ClearTable", НСтр("ru = 'Очистить таблицу';
																|en = 'Clear table'"), "DeviceID", НСтр("ru = 'ИД устройства';
																											|en = 'ИД устройства'"), "", "");
	
	// 3.5. Требования к разработке драйверов для ККТ с функцией передачи в ОФД
	ДобавитьОперацию(СистемаЛогирования, 0, "GetDataKKT", НСтр("ru = 'Получить параметры ККТ';
																|en = 'Get cash register parameters'"), "DeviceID, ", НСтр("ru = 'ИД устройства,';
																													|en = 'ИД устройства,'"), ", TableParametersKKT", НСтр("ru = ', Таблица параметров ККТ';
																																											|en = ', Cash register parameter table'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "OperationFN", НСтр("ru = 'Операция ФН';
																|en = 'Fiscal storage transaction'"), "DeviceID, OperationType, ParametersFiscal", НСтр("ru = 'ИД устройства, Тип операции, Параметры фискализации';
																																		|en = 'ИД устройства, Тип операции, Параметры фискализации'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "OpenShift", НСтр("ru = 'Открыть смену';
																|en = 'Open the shift'"), "DeviceID, InputParameters, ", НСтр("ru = 'ИД устройства, Входные параметры,';
																															|en = 'ИД устройства, Входные параметры,'"), ", , OutputParameters", НСтр("ru = ', , Выходные параметры';
																																																	|en = ', , Output parameters'"));
	ДобавитьОперацию(СистемаЛогирования, 3000, "OpenShift", НСтр("ru = 'Открыть смену';
																|en = 'Open the shift'"), "DeviceID, InputParameters, , , ", НСтр("ru = 'ИД устройства, Входные параметры, , ,';
																																	|en = 'ИД устройства, Входные параметры, , ,'"), ", , OutputParameters, SessionNumber, DocumentNumber", НСтр("ru = ', , Выходные параметры, Номер смены, Номер документа';
																																																												|en = ', , Output parameters, Shift number, Document number'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "CloseShift", НСтр("ru = 'Закрыть смену';
																|en = 'Close the shift'"), "DeviceID, InputParameters, ", НСтр("ru = 'ИД устройства, Входные параметры,';
																															|en = 'ИД устройства, Входные параметры,'"), ", , OutputParameters", НСтр("ru = ', , Выходные параметры';
																																																		|en = ', , Output parameters'"));
	ДобавитьОперацию(СистемаЛогирования, 3000, "CloseShift", НСтр("ru = 'Закрыть смену';
																	|en = 'Close the shift'"), "DeviceID, InputParameters, , , ", НСтр("ru = 'ИД устройства, Входные параметры, , ,';
																																	|en = 'ИД устройства, Входные параметры, , ,'"), ", , OutputParameters, SessionNumber, DocumentNumber", НСтр("ru = ', , Выходные параметры, Номер смены, Номер документа';
																																																												|en = ', , Output parameters, Shift number, Document number'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "ProcessCheck", НСтр("ru = 'Сформировать чек';
																|en = 'Generate receipt'"), "DeviceID, Electronically, CheckPackage, ", НСтр("ru = 'ИД устройства, Электронно, Данные чека,';
																																				|en = 'ИД устройства, Электронно, Данные чека,'"), ", Electronically, , DocumentOutputParameters", НСтр("ru = ', Электронно, , Выходные параметры документа';
																																																														|en = ', Electronically, , Output document parameters'"));
	ДобавитьОперацию(СистемаЛогирования, 3000, "ProcessCheck", НСтр("ru = 'Сформировать чек';
																	|en = 'Generate receipt'"), "DeviceID, Electronically, CheckPackage, , , , ", НСтр("ru = 'ИД устройства, Электронно, Данные чека, , , ,';
																																						|en = 'ИД устройства, Электронно, Данные чека, , , ,'"), ", Electronically, , CheckNumber, SessionNumber, FiscalSign, АдресСайтаПроверки", НСтр("ru = ', Электронно, , Номер чека, Номер смены, Фискальный признак, Address Site Inspections';
																																																																										|en = ', Electronically, , Receipt number, Shift number, Fiscal flag, Address Site Inspections'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "ProcessCorrectionCheck", НСтр("ru = 'Сформировать чек коррекции';
																			|en = 'Generate an adjustment voucher'"), "DeviceID, CheckPackage, ", НСтр("ru = 'ИД устройства, Данные чека,';
																																					|en = 'ИД устройства, Данные чека,'"), ", , DocumentOutputParameters", НСтр("ru = ', , Выходные параметры документа';
																																																								|en = ', , Output document parameters'"));
	ДобавитьОперацию(СистемаЛогирования, 3000, "ProcessCorrectionCheck", НСтр("ru = 'Сформировать чек коррекции';
																				|en = 'Generate an adjustment voucher'"), "DeviceID, CheckCorrectionPackage, , , , ", НСтр("ru = 'ИД устройства, Данные чека коррекции, , , ,';
																																									|en = 'ИД устройства, Данные чека коррекции, , , ,'"), ", , CheckNumber, SessionNumber, FiscalSign, АдресСайтаПроверки", НСтр("ru = ', , Номер чека, Номер смены, Фискальный признак, Address Site Inspections';
																																																																									|en = ', , Receipt number, Shift number, Fiscal flag, Address Site Inspections'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "PrintTextDocument", НСтр("ru = 'Напечатать текстовый документ';
																		|en = 'Print the text document'"), "DeviceID, DocumentPackage", НСтр("ru = 'ИД устройства, Данные документа';
																																				|en = 'ИД устройства, Данные документа'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "CashInOutcome", НСтр("ru = 'Напечатать чек внесения выемки';
																	|en = 'Print the putting cash in / taking cash out receipt'"), "DeviceID, InputParameters, Amount", НСтр("ru = 'ИД устройства, Входные параметры, Сумма';
																																						|en = 'ИД устройства, Входные параметры, Сумма'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "PrintXReport", НСтр("ru = 'Напечатать отчет без гашения';
																|en = 'Print a report without clearance'"), "DeviceID, InputParameters", НСтр("ru = 'ИД устройства, Входные параметры';
																																			|en = 'ИД устройства, Входные параметры'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "PrintCheckCopy", НСтр("ru = 'Напечатать копию чека';
																	|en = 'Print the receipt copy'"), "DeviceID, CheckNumber", НСтр("ru = 'ИД устройства, Номер чека';
																																	|en = 'ИД устройства, Номер чека'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "GetCurrentStatus", НСтр("ru = 'Получить текущее состояние';
																	|en = 'Get the current state'"), "DeviceID, InputParameters, ", НСтр("ru = 'ИД устройства, Входные параметры,';
																																				|en = 'ИД устройства, Входные параметры,'"), ", , OutputParameters", НСтр("ru = ', , Выходные параметры';
																																																						|en = ', , Output parameters'"));
	ДобавитьОперацию(СистемаЛогирования, 3000, "GetCurrentStatus", НСтр("ru = 'Получить текущее состояние';
																		|en = 'Get the current state'"), "DeviceID, , , , ", НСтр("ru = 'ИД устройства, , , ,';
																																		|en = 'ИД устройства, , , ,'"), ", CheckNumber, SessionNumber, SessionState, StatusParameters", НСтр("ru = ', Номер чека, Номер смены, Статус смены, Параметры состояния';
																																																											|en = ', Receipt number, Shift number, Shift status, State parameters'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "ReportCurrentStatusOfSettlements", НСтр("ru = 'Отчет о текущем состоянии расчетов';
																					|en = 'Отчет о текущем состоянии расчетов'"), "DeviceID, InputParameters, ", НСтр("ru = 'ИД устройства, Входные параметры,';
																																										|en = 'ИД устройства, Входные параметры,'"), ", , OutputParameters", НСтр("ru = ', , Выходные параметры';
																																																												|en = ', , Output parameters'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "OpenCashDrawer", НСтр("ru = 'Открыть денежный ящик';
																	|en = 'Open a cash till'"), "DeviceID", НСтр("ru = 'ИД устройства';
																													|en = 'ИД устройства'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "GetLineLength", НСтр("ru = 'Получить ширину строки';
																	|en = 'Receive the line width'"), "DeviceID, ", НСтр("ru = 'ИД устройства,';
																														|en = 'ИД устройства,'"), ", LineLength", НСтр("ru = ', Ширина строки';
																																										|en = ', Line width'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "OpenSessionRegistrationKM", НСтр("ru = 'Открыть сессию регистрации КМ';
																				|en = 'Open the MC registration session'"), "DeviceID", НСтр("ru = 'ИД устройства';
																																		|en = 'ИД устройства'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "CloseSessionRegistrationKM", НСтр("ru = 'Закрыть сессию регистрации КМ';
																				|en = 'Close the MC registration system'"), "DeviceID", НСтр("ru = 'ИД устройства';
																																		|en = 'ИД устройства'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "RequestKM", НСтр("ru = 'Запрос КМ';
																|en = 'MC query'"), "DeviceID, RequestKM, ", НСтр("ru = 'ИД устройства, Запрос КМ,';
																												|en = 'ИД устройства, Запрос КМ,'"), ", , RequestKMResult", НСтр("ru = ', , Результат запроса КМ';
																																													|en = ', , MC query result'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "GetProcessingKMResult", НСтр("ru = 'Получить результаты запроса КМ';
																			|en = 'Receive the MC request results'"), "DeviceID, , ", НСтр("ru = 'ИД устройства, ,';
																																		|en = 'ИД устройства, ,'"), ", ProcessingKMResult, RequestStatus", НСтр("ru = ', Результат запроса КМ, Статус запроса';
																																																				|en = ', MC request result, Request status'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "ConfirmKM", НСтр("ru = 'Подтвердить КМ';
																|en = 'Confirm MC'"), "DeviceID, GUID, ConfirmationType", НСтр("ru = 'ИД устройства, Идентификатор запроса, Тип подтверждения';
																																|en = 'ИД устройства, Идентификатор запроса, Тип подтверждения'"), "", "");
	
	// 3.6. Требования к разработке драйверов для принтеров чеков
	ДобавитьОперацию(СистемаЛогирования, 0, "PrintTextDocument", НСтр("ru = 'Напечатать текстовый документ';
																		|en = 'Print the text document'"), "DeviceID, DocumentPackage", НСтр("ru = 'ИД устройства, Данные документа';
																																				|en = 'ИД устройства, Данные документа'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "OpenCashDrawer", НСтр("ru = 'Открыть денежный ящик';
																	|en = 'Open a cash till'"), "DeviceID", НСтр("ru = 'ИД устройства';
																													|en = 'ИД устройства'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "GetLineLength", НСтр("ru = 'Получить ширину строки';
																	|en = 'Receive the line width'"), "DeviceID, ", НСтр("ru = 'ИД устройства,';
																														|en = 'ИД устройства,'"), ", LineLength", НСтр("ru = ', Ширина строки';
																																										|en = ', Line width'"));
	
	// 3.7. Требования к разработке драйверов для принтеров этикеток
	ДобавитьОперацию(СистемаЛогирования, 0, "InitializePrinter", НСтр("ru = 'Инициализация принтера';
																		|en = 'Printer initialization'"), "DeviceID", НСтр("ru = 'ИД устройства';
																														|en = 'ИД устройства'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "PrintLabels", НСтр("ru = 'Печать этикеток';
																|en = 'Print labels'"), "DeviceID, LabelsTable, PackageStatus", НСтр("ru = 'ИД устройства, Таблица этикеток, Статус пакета';
																																		|en = 'ИД устройства, Таблица этикеток, Статус пакета'"), "", "");
	
	// 3.9. Требования к разработке драйверов для эквайринговых терминалов
	ДобавитьОперацию(СистемаЛогирования, 0, "TerminalParamters", НСтр("ru = 'Параметры терминала';
																		|en = 'Terminal parameters'"), "DeviceID, ", НСтр("ru = 'ИД устройства,';
																														|en = 'ИД устройства,'"), ", TerminalParamters", НСтр("ru = ', Параметры терминала';
																																												|en = ', Terminal parameters'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "Pay", НСтр("ru = 'Оплатить';
														|en = 'Pay'"), "DeviceID, OperationParameters, , ", НСтр("ru = 'ИД устройства, Входящие параметры, ,';
																														|en = 'Device ID, Input parameters, ,'"), ", , OperationParameters, Slip", НСтр("ru = ', , Исходящие параметры, Текст квитанции';
																																																			|en = ', , Original parameters, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "ReturnPayment", НСтр("ru = 'Вернуть платеж';
																	|en = 'Return the payment'"), "DeviceID, OperationParameters, , ", НСтр("ru = 'ИД устройства, Входящие параметры, ,';
																																		|en = 'Device ID, Input parameters, ,'"), ", , OperationParameters, Slip", НСтр("ru = ', , Исходящие параметры, Текст квитанции';
																																																							|en = ', , Original parameters, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "CancelPayment", НСтр("ru = 'Отменить платеж';
																	|en = 'Cancel the payment'"), "DeviceID, OperationParameters, , ", НСтр("ru = 'ИД устройства, Входящие параметры, ,';
																																		|en = 'Device ID, Input parameters, ,'"), ", , OperationParameters, Slip", НСтр("ru = ', , Исходящие параметры, Текст квитанции';
																																																							|en = ', , Original parameters, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "Authorisation", НСтр("ru = 'Преавторизация';
																	|en = 'Preauthorization'"), "DeviceID, OperationParameters, , ", НСтр("ru = 'ИД устройства, Входящие параметры, ,';
																																		|en = 'Device ID, Input parameters, ,'"), ", , OperationParameters, Slip", НСтр("ru = ', , Исходящие параметры, Текст квитанции';
																																																							|en = ', , Original parameters, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "AuthConfirmation", НСтр("ru = 'Завершить преавторизацию';
																	|en = 'Finish preauthorization'"), "DeviceID, OperationParameters, , ", НСтр("ru = 'ИД устройства, Входящие параметры, ,';
																																					|en = 'Device ID, Input parameters, ,'"), ", , OperationParameters, Slip", НСтр("ru = ', , Исходящие параметры, Текст квитанции';
																																																										|en = ', , Original parameters, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "CancelAuthorisation", НСтр("ru = 'Отменить преавторизацию';
																		|en = 'Cancel preauthorization'"), "DeviceID, OperationParameters, , ", НСтр("ru = 'ИД устройства, Входящие параметры, ,';
																																					|en = 'Device ID, Input parameters, ,'"), ", , OperationParameters, Slip", НСтр("ru = ', , Исходящие параметры, Текст квитанции';
																																																											|en = ', , Original parameters, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "PayWithCashWithdrawal", НСтр("ru = 'Оплата с выдачей наличных';
																			|en = 'Оплата с выдачей наличных'"), "DeviceID, OperationParameters, , ", НСтр("ru = 'ИД устройства, Входящие параметры, ,';
																																						|en = 'Device ID, Input parameters, ,'"), ", , OperationParameters, Slip", НСтр("ru = ', , Исходящие параметры, Текст квитанции';
																																																												|en = ', , Original parameters, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "PurchaseWithEnrollment", НСтр("ru = 'Покупка с зачислением';
																			|en = 'Покупка с зачислением'"), "DeviceID, OperationParameters, , ", НСтр("ru = 'ИД устройства, Входящие параметры, ,';
																																						|en = 'Device ID, Input parameters, ,'"), ", , OperationParameters, Slip", НСтр("ru = ', , Исходящие параметры, Текст квитанции';
																																																											|en = ', , Original parameters, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "GetCardParametrs", НСтр("ru = 'Получить параметры карты';
																	|en = 'Get card details'"), "DeviceID, ConsumerPresentedQR, FromLastOperation, , , , , ", НСтр("ru = 'ИД устройства, Реквизиты карты QR, От последней операции, , , , ,';
																																											|en = 'ИД устройства, Реквизиты карты QR, От последней операции, , , , ,'"), ", , , CardNumber, CardNumberHash, PaymentAccountReference, CardType, IsOwnCard", НСтр("ru = ', , , Номер карты, Хеш номер карты, Ссылка на платежный счет, Тип карты, Своя карта';
																																																																																				|en = ', , ,  Card number, Hash number of the card, reference to the payment account, Card type, Own card'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "PayCertificate", НСтр("ru = 'Оплатить сертификатом';
																	|en = 'Pay with a certificate'"), "DeviceID, OperationParameters, , ", НСтр("ru = 'ИД устройства, Входящие параметры, ,';
																																				|en = 'Device ID, Input parameters, ,'"), ", , OperationParameters, Slip", НСтр("ru = ', , Исходящие параметры, Текст квитанции';
																																																									|en = ', , Original parameters, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "ReturnCertificate", НСтр("ru = 'Вернуть сертификатом';
																		|en = 'Return with a certificate'"), "DeviceID, OperationParameters, , ", НСтр("ru = 'ИД устройства, Входящие параметры, ,';
																																				|en = 'Device ID, Input parameters, ,'"), ", , OperationParameters, Slip", НСтр("ru = ', , Исходящие параметры, Текст квитанции';
																																																										|en = ', , Original parameters, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "EmergencyReversal", НСтр("ru = 'Аварийная отмена операции';
																		|en = 'Abnormal cancellation of the operation'"), "DeviceID", НСтр("ru = 'ИД устройства';
																															|en = 'ИД устройства'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "GetOperationByCards", НСтр("ru = 'Получить операции по картам';
																		|en = 'Receive card transactions'"), "DeviceID, ", НСтр("ru = 'ИД устройства,';
																																	|en = 'ИД устройства,'"), ", TableOperations", НСтр("ru = ', Таблица операций';
																																														|en = ', Transaction table'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "Settlement", НСтр("ru = 'Итоги дня по картам';
																|en = 'Day results by cards'"), "DeviceID, ", НСтр("ru = 'ИД устройства,';
																												|en = 'ИД устройства,'"), ", Slip", НСтр("ru = ', Текст квитанции';
																																							|en = ', Receipt text'"));

	ДобавитьОперацию(СистемаЛогирования, 3005, "PayByPaymentCard", НСтр("ru = 'Оплатить платежной картой';
																		|en = 'Pay by payment card'"), "DeviceID, CardNumber, Amount, ReceiptNumber, , , ", НСтр("ru = 'ИД устройства, Номер карты, Сумма, Номер чека, , ,';
																																										|en = 'ИД устройства, Номер карты, Сумма, Номер чека, , ,'"), ", CardNumber, , ReceiptNumber, RRNCode, AuthorizationCode, Slip", НСтр("ru = ', Номер карты, , Номер чека, Код RRN, Код авторизации, Текст квитанции';
																																																																											|en = ', Card number, , Receipt number, RRN code, Authorization code, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 4000, "PayByPaymentCard", НСтр("ru = 'Оплатить платежной картой';
																		|en = 'Pay by payment card'"), "DeviceID, MerchantNumber, Amount, CardNumber, ReceiptNumber, , , ", НСтр("ru = 'ИД устройства, Номер мерчанта, Сумма, Номер карты, Номер чека, , ,';
																																														|en = 'ИД устройства, Номер мерчанта, Сумма, Номер карты, Номер чека, , ,'"), ", , , CardNumber, ReceiptNumber, RRNCode, AuthorizationCode, Slip", НСтр("ru = ', , , Номер карты, Номер чека, Код RRN, Код авторизации, Текст квитанции';
																																																																																				|en = ', , , Card number, Receipt number, RRN code, Authorization code, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "PayByPaymentCard", НСтр("ru = 'Оплатить платежной картой';
																	|en = 'Pay by payment card'"), "DeviceID, MerchantNumber, Amount, CardNumber, ReceiptNumber, , , ", НСтр("ru = 'ИД устройства, Номер мерчанта, Сумма, Номер карты, Номер чека, , ,';
																																													|en = 'ИД устройства, Номер мерчанта, Сумма, Номер карты, Номер чека, , ,'"), ", , , CardNumber, ReceiptNumber, RRNCode, AuthorizationCode, Slip", НСтр("ru = ', , , Номер карты, Номер чека, Код RRN, Код авторизации, Текст квитанции';
																																																																																			|en = ', , , Card number, Receipt number, RRN code, Authorization code, Receipt text'"));
	
	ДобавитьОперацию(СистемаЛогирования, 3005, "ReturnPaymentByPaymentCard", НСтр("ru = 'Вернуть платеж по платежной карте';
																					|en = 'Payment return by payment card'"), "DeviceID, CardNumber, Amount, ReceiptNumber, RRNCode, AuthorizationCode, ", НСтр("ru = 'ИД устройства, Номер карты, Сумма, Номер чека, Код RRN, Код авторизации,';
																																																				|en = 'ИД устройства, Номер карты, Сумма, Номер чека, Код RRN, Код авторизации,'"), ", CardNumber, , ReceiptNumber, RRNCode, AuthorizationCode, Slip", НСтр("ru = ', Номер карты, , Номер чека, Код RRN, Код авторизации, Текст квитанции';
																																																																																											|en = ', Card number, , Receipt number, RRN code, Authorization code, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 4000, "ReturnPaymentByPaymentCard", НСтр("ru = 'Вернуть платеж по платежной карте';
																					|en = 'Payment return by payment card'"), "DeviceID, MerchantNumber, Amount, CardNumber, ReceiptNumber, RRNCode, AuthorizationCode, ", НСтр("ru = 'ИД устройства, Номер мерчанта, Сумма, Номер карты, Номер чека, Код RRN, Код авторизации,';
																																																								|en = 'ИД устройства, Номер мерчанта, Сумма, Номер карты, Номер чека, Код RRN, Код авторизации,'"), ", , , CardNumber, ReceiptNumber, RRNCode, , Slip", НСтр("ru = ', , , Номер карты, Номер чека, Код RRN, , Текст квитанции';
																																																																																																|en = ', , , Card number, Receipt number, RRN code, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "ReturnPaymentByPaymentCard", НСтр("ru = 'Вернуть платеж по платежной карте';
																				|en = 'Payment return by payment card'"), "DeviceID, MerchantNumber, Amount, CardNumber, ReceiptNumber, RRNCode, AuthorizationCode, ", НСтр("ru = 'ИД устройства, Номер мерчанта, Сумма, Номер карты, Номер чека, Код RRN, Код авторизации,';
																																																								|en = 'ИД устройства, Номер мерчанта, Сумма, Номер карты, Номер чека, Код RRN, Код авторизации,'"), ", , , CardNumber, ReceiptNumber, RRNCode, , Slip", НСтр("ru = ', , , Номер карты, Номер чека, Код RRN, , Текст квитанции';
																																																																																															|en = ', , , Card number, Receipt number, RRN code, Receipt text'"));

	ДобавитьОперацию(СистемаЛогирования, 3005, "CancelPaymentByPaymentCard", НСтр("ru = 'Отменить платеж по платежной карте';
																					|en = 'Cancel payment by payment card'"), "DeviceID, CardNumber, Amount, ReceiptNumber, RRNCode, AuthorizationCode, ", НСтр("ru = 'ИД устройства, Номер карты, Сумма, Номер чека, Код RRN, Код авторизации,';
																																																					|en = 'ИД устройства, Номер карты, Сумма, Номер чека, Код RRN, Код авторизации,'"), ", CardNumber, , ReceiptNumber, RRNCode, AuthorizationCode, Slip", НСтр("ru = ', Номер карты, , Номер чека, Код RRN, Код авторизации, Текст квитанции';
																																																																																												|en = ', Card number, , Receipt number, RRN code, Authorization code, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 4000, "CancelPaymentByPaymentCard", НСтр("ru = 'Отменить платеж по платежной карте';
																					|en = 'Cancel payment by payment card'"), "DeviceID, MerchantNumber, Amount, CardNumber, ReceiptNumber, RRNCode, AuthorizationCode, ", НСтр("ru = 'ИД устройства, Номер мерчанта, Сумма, Номер карты, Номер чека, Код RRN, Код авторизации,';
																																																									|en = 'ИД устройства, Номер мерчанта, Сумма, Номер карты, Номер чека, Код RRN, Код авторизации,'"), ", , , CardNumber, ReceiptNumber, , , Slip", НСтр("ru = ', , , Номер карты, Номер чека, , , Текст квитанции';
																																																																																														|en = ', , , Card number, Receipt number, , , Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "CancelPaymentByPaymentCard", НСтр("ru = 'Отменить платеж по платежной карте';
																				|en = 'Cancel payment by payment card'"), "DeviceID, MerchantNumber, Amount, CardNumber, ReceiptNumber, RRNCode, AuthorizationCode, ", НСтр("ru = 'ИД устройства, Номер мерчанта, Сумма, Номер карты, Номер чека, Код RRN, Код авторизации,';
																																																								|en = 'ИД устройства, Номер мерчанта, Сумма, Номер карты, Номер чека, Код RRN, Код авторизации,'"), ", , , CardNumber, ReceiptNumber, , , Slip", НСтр("ru = ', , , Номер карты, Номер чека, , , Текст квитанции';
																																																																																													|en = ', , , Card number, Receipt number, , , Receipt text'"));
	
	ДобавитьОперацию(СистемаЛогирования, 4000, "PayByPaymentCardWithCashWithdrawal", НСтр("ru = 'Оплатить платежной картой с выдачей наличных';
																							|en = 'Оплатить платежной картой с выдачей наличных'"), "DeviceID, MerchantNumber, AmountPayment, AmountCash, , , , , ", НСтр("ru = 'ИД устройства, Номер мерчанта, Сумма операции, Сумма наличных, , , , ,';
																																																						|en = 'ИД устройства, Номер мерчанта, Сумма операции, Сумма наличных, , , , ,'"), ", , , , CardNumber, ReceiptNumber, RRNCode, AuthorizationCode, Slip", НСтр("ru = ', , , , Номер карты, Номер чека, Код RRN, Код авторизации, Текст квитанции';
																																																																																														|en = ', , , , Card number, Receipt number, RRN Code, Authorization code, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "PayByPaymentCardWithCashWithdrawal", НСтр("ru = 'Оплатить платежной картой с выдачей наличных';
																						|en = 'Оплатить платежной картой с выдачей наличных'"), "DeviceID, MerchantNumber, AmountPayment, AmountCash, , , , , ", НСтр("ru = 'ИД устройства, Номер мерчанта, Сумма операции, Сумма наличных, , , , ,';
																																																					|en = 'ИД устройства, Номер мерчанта, Сумма операции, Сумма наличных, , , , ,'"), ", , , , CardNumber, ReceiptNumber, RRNCode, AuthorizationCode, Slip", НСтр("ru = ', , , , Номер карты, Номер чека, Код RRN, Код авторизации, Текст квитанции';
																																																																																													|en = ', , , , Card number, Receipt number, RRN Code, Authorization code, Receipt text'"));

	ДобавитьОперацию(СистемаЛогирования, 3005, "GetCardParametrs", НСтр("ru = 'Получить параметры карты';
																		|en = 'Get card details'"), "DeviceID, FromLastOperation, , , , ", НСтр("ru = 'ИД устройства, От последней операции, , , ,';
																																						|en = 'ИД устройства, От последней операции, , , ,'"), ", , CardNumber, CardNumberHash, CardType, IsOwnCard", НСтр("ru = ', , Номер карты, Хеш номер карты, Тип карты, Своя карта';
																																																																			|en = ', , Card number, Hash number of the card, Card type, Own card'"));
	ДобавитьОперацию(СистемаЛогирования, 4000, "GetCardParametrs", НСтр("ru = 'Получить параметры карты';
																		|en = 'Get card details'"), "DeviceID, FromLastOperation, , , , , ", НСтр("ru = 'ИД устройства, От последней операции, , , , ,';
																																							|en = 'ИД устройства, От последней операции, , , , ,'"), ", , CardNumber, CardNumberHash, PaymentAccountReference, CardType, IsOwnCard", НСтр("ru = ', , Номер карты, Хеш номер карты, Ссылка на платежный счет, Тип карты, Своя карта';
																																																																										|en = ', , Card number, Hash number of the card, Reference to the payment account, Card type, Own card'"));

	ДобавитьОперацию(СистемаЛогирования, 4000, "PayElectronicCertificate", НСтр("ru = 'Оплатить электронным сертификатом';
																				|en = 'Pay with digital certificate'"), "DeviceID, MerchantNumber, BasketID, ElectronicCertificateAmount, OwnFundsAmount, , , , , , ", НСтр("ru = 'ИД устройства, Номер мерчанта, Идентификатор корзины, Сумма электронного сертификата, Сумма собственных средств, , , , , ,';
																																																								|en = 'Device ID, Merchant number, Cart ID, Digital certificate amount, Own fund amount, , , , , ,'"), ", , BasketID, , , CardNumber, ReceiptNumber, RRNCode, AuthorizationCode, OperationStatus, Slip", НСтр("ru = ', , Идентификатор корзины, , , Номер карты, Номер чека, Код RRN, Код авторизации, Статус операции, Текст квитанции';
																																																																																																																				|en = ', , Cart ID, , , Card number, Receipt number, RRN Code, Authorization code, Transaction status, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "PayElectronicCertificate", НСтр("ru = 'Оплатить электронным сертификатом';
																			|en = 'Pay with digital certificate'"), "DeviceID, MerchantNumber, BasketID, ElectronicCertificateAmount, OwnFundsAmount, , , , , , ", НСтр("ru = 'ИД устройства, Номер мерчанта, Идентификатор корзины, Сумма электронного сертификата, Сумма собственных средств, , , , , ,';
																																																								|en = 'Device ID, Merchant number, Cart ID, Digital certificate amount, Own fund amount, , , , , ,'"), ", , BasketID, , , CardNumber, ReceiptNumber, RRNCode, AuthorizationCode, OperationStatus, Slip", НСтр("ru = ', , Идентификатор корзины, , , Номер карты, Номер чека, Код RRN, Код авторизации, Статус операции, Текст квитанции';
																																																																																																																			|en = ', , Cart ID, , , Card number, Receipt number, RRN Code, Authorization code, Transaction status, Receipt text'"));
	
	ДобавитьОперацию(СистемаЛогирования, 4000, "ReturnElectronicCertificate", НСтр("ru = 'Вернуть электронным сертификатом';
																					|en = 'Return by digital certificate'"), "DeviceID, MerchantNumber, BasketID, ElectronicCertificateAmount, OwnFundsAmount, CardNumber, ReceiptNumber, RRNCode, , , ", НСтр("ru = 'ИД устройства, Номер мерчанта, Идентификатор корзины, Сумма электронного сертификата, Сумма собственных средств, Номер карты, Номер чека, Код RRN, , ,';
																																																																|en = 'Device ID, Merchant number, Cart ID, Digital certificate amount, Own fund amount, Card number, Receipt number, RRN code, , ,'"), ", , BasketID, , , CardNumber, ReceiptNumber, RRNCode, AuthorizationCode, OperationStatus, Slip", НСтр("ru = ', , Идентификатор корзины, , , Номер карты, Номер чека, Код RRN, Код авторизации, Статус операции, Текст квитанции';
																																																																																																																																			|en = ', , Cart ID, , , Card number, Receipt number, RRN Code, Authorization code, Transaction status, Receipt text'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "ReturnElectronicCertificate", НСтр("ru = 'Вернуть электронным сертификатом';
																				|en = 'Return by digital certificate'"), "DeviceID, MerchantNumber, BasketID, ElectronicCertificateAmount, OwnFundsAmount, CardNumber, ReceiptNumber, RRNCode, , , ", НСтр("ru = 'ИД устройства, Номер мерчанта, Идентификатор корзины, Сумма электронного сертификата, Сумма собственных средств, Номер карты, Номер чека, Код RRN, , ,';
																																																																|en = 'Device ID, Merchant number, Cart ID, Digital certificate amount, Own fund amount, Card number, Receipt number, RRN code, , ,'"), ", , BasketID, , , CardNumber, ReceiptNumber, RRNCode, AuthorizationCode, OperationStatus, Slip", НСтр("ru = ', , Идентификатор корзины, , , Номер карты, Номер чека, Код RRN, Код авторизации, Статус операции, Текст квитанции';
																																																																																																																																		|en = ', , Cart ID, , , Card number, Receipt number, RRN Code, Authorization code, Transaction status, Receipt text'"));
	
	// 3.10. Требования к разработке драйверов для RFID считывателей
	ДобавитьОперацию(СистемаЛогирования, 0, "OpenSessionRFID", НСтр("ru = 'Открыть сессию RFID';
																	|en = 'Open the RFID session'"), "DeviceID", НСтр("ru = 'ИД устройства';
																													|en = 'ИД устройства'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "CloseSessionRFID", НСтр("ru = 'Закрыть сессию RFID';
																	|en = 'Close the RFID session'"), "DeviceID", НСтр("ru = 'ИД устройства';
																													|en = 'ИД устройства'"), "", "");
	ДобавитьОперацию(СистемаЛогирования, 0, "GetDataTagsRFID", НСтр("ru = 'Получить данные меток RFID';
																	|en = 'Receive RFID label cata'"), "DeviceID, PackageID, ", НСтр("ru = 'ИД устройства, ИД пакета,';
																																		|en = 'ИД устройства, ИД пакета,'"), ", , TagsTable", НСтр("ru = ', , Таблица меток';
																																																	|en = ', , Label table'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "SaveDataTagRFID", НСтр("ru = 'Записать данные в метку RFID';
																	|en = 'Записать данные в метку RFID'"), "DeviceID, TID, EPC, Data, MemoryBank, Timeout", НСтр("ru = 'ИД устройства, TID, EPC, Данные, Банк памяти, Таймаут';
																																									|en = 'ИД устройства, TID, EPC, Данные, Банк памяти, Таймаут'"), ", TID, EPC, , , ", НСтр("ru = ', TID, EPC, , ,';
																																																															|en = ', TID, EPC, , ,'"));
	
	// 3.11. Требования к разработке устройств распознавания
	ДобавитьОперацию(СистемаЛогирования, 0, "Recognize", НСтр("ru = 'Распознать';
																|en = 'Recognize'"), "DeviceID, Training, Variants, ", НСтр("ru = 'ИД устройства, Обучение, Варианты,';
																															|en = 'ИД устройства, Обучение, Варианты,'"), ", , , GoodsRecognizeTable", НСтр("ru = ', , , Таблица распознанных товаров';
																																																			|en = ', , , Table of identified goods'"));
	ДобавитьОперацию(СистемаЛогирования, 0, "ConfirmRecognize", НСтр("ru = 'Подтвердить распознавание';
																	|en = 'Confirm recognition'"), "DeviceID, Code", НСтр("ru = 'ИД устройства, Код';
																																|en = 'ИД устройства, Код'"), "", "");
	
КонецПроцедуры

#КонецОбласти
