
#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура СвернутьДвижения(Команда)
	
	ДлительнаяОперация = НачатьСверткуДвиженийНаСервере();
	ОповещениеОЗавершении = Новый ОписаниеОповещения("ПослеЗавершенияСверткиДвижений", ЭтотОбъект);
	
	ПараметрыОжидания = ДлительныеОперацииКлиент.ПараметрыОжидания(ЭтотОбъект);
	ДлительныеОперацииКлиент.ОжидатьЗавершение(ДлительнаяОперация, ОповещениеОЗавершении, ПараметрыОжидания);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Процедура ПослеЗавершенияСверткиДвижений(Результат, ДополнительныеПараметры) Экспорт
	
	Элементы.Список.Обновить();
	
КонецПроцедуры

&НаСервере
Функция НачатьСверткуДвиженийНаСервере()
	
	Возврат ДлительныеОперации.ВыполнитьПроцедуру(,
		"РегистрыНакопления.ДоступностьВидовРабочихЦентров.СвернутьЗаписиПоРесурсуЗанято");
	
КонецФункции

#КонецОбласти