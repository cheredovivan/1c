//@strict-types

#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОписаниеПеременных

Перем ЗначениеИзменено; // Булево

#КонецОбласти

#Область ОбработчикиСобытий

Процедура ПередЗаписью(Отказ)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Если ПланыОбмена.ГлавныйУзел() <> Неопределено Тогда
		
		ТекстСообщения = НСтр("ru = 'Запрещено изменение функционала ретро-бонусов поставщиков в подчиненном узле обмена';
								|en = 'Cannot change the vendor rebate functions in a subordinate exchange node'");
		ОбщегоНазначения.СообщитьПользователю(ТекстСообщения,,,, Отказ);
		
	КонецЕсли;
	
	ЗначениеИзменено = (Значение <> Константы.ИспользоватьРетроБонусыКлиентов.Получить());
	
КонецПроцедуры

Процедура ПриЗаписи(Отказ)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Если ЗначениеИзменено Тогда
		
		ПараметрыНабора = УправлениеСвойствами.СтруктураПараметровНабораСвойств();
		ПараметрыНабора.Используется = ПолучитьФункциональнуюОпцию("ИспользоватьРетроБонусыПоставщиков");
		
		УправлениеСвойствами.УстановитьПараметрыНабораСвойств(
			"Справочник_ВидыРетроБонусовПоставщиков", ПараметрыНабора);
		УправлениеСвойствами.УстановитьПараметрыНабораСвойств(
			"Документ_УсловияРетроБонусовПоставщика", ПараметрыНабора);
		УправлениеСвойствами.УстановитьПараметрыНабораСвойств(
			"Документ_СписаниеРетроБонусовПоставщика", ПараметрыНабора);
		УправлениеСвойствами.УстановитьПараметрыНабораСвойств(
			"Документ_НачислениеРетроБонусовПоставщика", ПараметрыНабора);
		
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли