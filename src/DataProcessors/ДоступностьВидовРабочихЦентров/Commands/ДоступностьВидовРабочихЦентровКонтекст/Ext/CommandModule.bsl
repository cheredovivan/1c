
#Область ОбработчикиСобытий

&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	ЗначенияРеквизитов = ПараметрыВидаРабочегоЦентра(ПараметрКоманды);
	
	Если НЕ ЗначениеЗаполнено(ПараметрКоманды) ИЛИ ЗначенияРеквизитов.ЭтоГруппа Тогда
		ПоказатьПредупреждение(, НСтр("ru = 'Команда не может быть выполнена для указанного объекта!';
										|en = 'Cannot execute this command for the specified object.'"));
		Возврат;
	КонецЕсли;
	
	Если ЗначенияРеквизитов.УчитыватьДоступностьПоГрафикуРаботы Тогда
		РежимРаботы = ПредопределенноеЗначение("Перечисление.РежимыРедактированияДоступностиВидовРЦ.ВводДоступностиДляФормированияГрафикаПроизводства");
	Иначе
		РежимРаботы = ПредопределенноеЗначение("Перечисление.РежимыРедактированияДоступностиВидовРЦ.ВводГрафикаРаботыРЦДляФормированияРасписанияРаботыРЦ");
	КонецЕсли;
	
	ПараметрыФормы = Новый Структура;
	ПараметрыФормы.Вставить("РежимРаботы", РежимРаботы);
	ПараметрыФормы.Вставить("ВидРабочегоЦентра", ПараметрКоманды);
	ПараметрыФормы.Вставить("НачалоПериода", ОбщегоНазначенияКлиент.ДатаСеанса());
	
	ОткрытьФорму(
		"Обработка.ДоступностьВидовРабочихЦентров.Форма",
		ПараметрыФормы, 
		ПараметрыВыполненияКоманды.Источник, 
		ПараметрыВыполненияКоманды.Уникальность, 
		ПараметрыВыполненияКоманды.Окно, 
		ПараметрыВыполненияКоманды.НавигационнаяСсылка);
	
КонецПроцедуры

&НаСервере
Функция ПараметрыВидаРабочегоЦентра(Ссылка)
	
	ЗначенияРеквизитов = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Ссылка, "
				|ЭтоГруппа,
				|Представление,
				|УчитыватьДоступностьПоГрафикуРаботы,
				|ПланироватьРаботуРабочихЦентров");

	Возврат ЗначенияРеквизитов;
	
КонецФункции

#КонецОбласти
