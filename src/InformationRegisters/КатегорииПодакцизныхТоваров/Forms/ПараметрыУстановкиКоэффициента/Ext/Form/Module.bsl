#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;
	
	АвтоЗаполнениеКоэффициентаПересчета = Параметры.АвтоЗаполнениеКоэффициентаПересчета;
	ЗапрашиватьКоэффициент = Параметры.ЗапрашиватьКоэффициент;
	ЕдиницаИзмеренияКатегории = Параметры.ЕдиницаИзмеренияКатегории;
	
	Если АвтоЗаполнениеКоэффициентаПересчета Тогда
		Элементы.УстановитьКоэффициентПересчета.Видимость = Истина;
		Элементы.УстановитьКоэффициентПересчета.Доступность = Истина;
		Элементы.ГруппаПоАвтоПересчету.Видимость = Истина;
		Элементы.ГруппаВводаКоэффициента.Видимость = Ложь;
		Элементы.ГруппаПриВыбореНоменклатурыСРазнымиЕД.Видимость = Ложь;
	КонецЕсли;
		
	Если ЗапрашиватьКоэффициент Тогда
		Элементы.УстановитьКоэффициентПересчета.Видимость = Истина;
		Элементы.УстановитьКоэффициентПересчета.Доступность = Истина;
		Элементы.ГруппаПоАвтоПересчету.Видимость = Ложь;
		Элементы.ГруппаВводаКоэффициента.Видимость = Истина; 
		Элементы.ГруппаПриВыбореНоменклатурыСРазнымиЕД.Видимость = Параметры.ЕстьРазныеЕдиницыИзмерения;
	КонецЕсли;
		
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Начать(Команда)
	
	Если ЗапрашиватьКоэффициент
		И Не ЗначениеЗаполнено(КоэффициентПересчета) Тогда
		ПоказатьПредупреждение(, НСтр("ru = 'Не задан коэффициент пересчета.';
										|en = 'Conversion ratio is not set.'"));
	Иначе
		Результат = Новый Структура;
		Результат.Вставить("КоэффициентПересчета", КоэффициентПересчета);
		Закрыть(Результат);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти