///////////////////////////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 2025, ООО 1С-Софт
// Все права защищены. Эта программа и сопроводительные материалы предоставляются 
// в соответствии с условиями лицензии Attribution 4.0 International (CC BY 4.0)
// Текст лицензии доступен по ссылке:
// https://creativecommons.org/licenses/by/4.0/legalcode
///////////////////////////////////////////////////////////////////////////////////////////////////////

#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область СлужебныеПроцедурыИФункции

// Возвращает тип аутентификации по участнику и варианту настройки:
//
// Возвращаемое значение:
//  ПеречислениеСсылка.ТипыАутентификацииСБП, Строка - тип аутентификации.
//
Функция ТипАутентификацииУчастника(ИдентификаторУчастника, ИмяПоля) Экспорт
	
	Запрос = Новый Запрос;
	Запрос.Текст =
	"ВЫБРАТЬ
	|	НастройкиУчастниковСБП.%1 КАК ТипАутентификации
	|ИЗ
	|	РегистрСведений.НастройкиУчастниковСБП КАК НастройкиУчастниковСБП
	|ГДЕ
	|	НастройкиУчастниковСБП.Идентификатор = &Идентификатор";
	
	Запрос.УстановитьПараметр("Идентификатор", ИдентификаторУчастника);
	Запрос.Текст = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
		Запрос.Текст,
		ИмяПоля);
	
	Выборка = Запрос.Выполнить().Выбрать();
	
	Если Выборка.Следующий()
		И ЗначениеЗаполнено(Выборка.ТипАутентификации) Тогда
		Возврат Выборка.ТипАутентификации;
	Иначе
		Возврат "UNKNOW";
	КонецЕсли;
	
КонецФункции

#КонецОбласти

#КонецЕсли