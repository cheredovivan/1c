#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область СлужебныйПрограммныйИнтерфейс

Функция Настройки() Экспорт
	
	Настройки = РегистрыСведений.НастройкиКабинетСотрудника.СоздатьМенеджерЗаписи();
	Настройки.Прочитать();
	СтруктураНастроек = ОбщегоНазначения.СтруктураПоМенеджеруЗаписи(Настройки, Метаданные.РегистрыСведений.НастройкиКабинетСотрудника);
	
	Если Не Настройки.Выбран() Тогда
		ЗаполнитьЗначенияСвойств(СтруктураНастроек, ИнтеграцияКабинетСотрудника.НастройкиСервисаПоУмолчанию());
	Иначе
		Если Не ЗначениеЗаполнено(СтруктураНастроек.УровеньДоступаКИ) Тогда
			СтруктураНастроек.УровеньДоступаКИ = Перечисления.УровниДоступаКИнформацииОСотрудниках.Руководители;
		КонецЕсли;
	КонецЕсли;
	
	Возврат СтруктураНастроек;

КонецФункции

#КонецОбласти
	
#Область СлужебныеПроцедурыИФункции

Процедура СохранитьНовыеНастройки(СохраняемыеНастройки) Экспорт

	НаборЗаписей = РегистрыСведений.НастройкиКабинетСотрудника.СоздатьНаборЗаписей();
	НаборЗаписей.Прочитать();
	Если НаборЗаписей.Количество() = 0 Тогда
		ЗаполнитьЗначенияСвойств(НаборЗаписей.Добавить(), СохраняемыеНастройки);
	Иначе
		ЗаполнитьЗначенияСвойств(НаборЗаписей[0], СохраняемыеНастройки);
	КонецЕсли;
	НаборЗаписей.Записать();

КонецПроцедуры

#КонецОбласти

#КонецЕсли
