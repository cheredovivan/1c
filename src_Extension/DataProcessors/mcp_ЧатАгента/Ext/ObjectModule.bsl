#Область ПрограммныйИнтерфейс

// Создает новую сессию диалога
//
// Возвращаемое значение:
//  Строка - идентификатор сессии
//
Функция СоздатьСессию() Экспорт
	
	УникальныйID = Новый УникальныйИдентификатор;
	Сессия = СтрЗаменить(Строка(УникальныйID), "-", "");
	
	Возврат Сессия;
	
КонецФункции

// Очищает историю диалога для сессии
//
// Параметры:
//  Сессия - Строка - идентификатор сессии
//
Процедура ОчиститьИсторию(Сессия) Экспорт
	
	Пользователь = ПараметрыСеанса.ТекущийПользователь;
	
	// Создаём пустой набор записей с отбором - при записи он очистит все записи по отбору
	НаборЗаписей = РегистрыСведений.mcp_ИсторияДиалогов.СоздатьНаборЗаписей();
	НаборЗаписей.Отбор.Пользователь.Установить(Пользователь);
	НаборЗаписей.Отбор.Сессия.Установить(Сессия);
	
	// Записываем пустой набор - это удалит все записи по отбору
	НаборЗаписей.Записать();
	
КонецПроцедуры

#КонецОбласти
