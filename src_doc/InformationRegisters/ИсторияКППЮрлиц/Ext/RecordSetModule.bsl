#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий

Процедура ПередЗаписью(Отказ, Замещение)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	ТекстСообщенияБсп = "";
	Для Каждого Запись Из ЭтотОбъект Цикл
		Если ЗначениеЗаполнено(Запись.КПП) 
				И Не РегламентированныеДанныеКлиентСерверЛокализация.КППСоответствуетТребованиям(Запись.КПП, 
																							ТекстСообщенияБсп) Тогда
 			ТекстСообщения = СтрШаблон(
				НСтр("ru = 'История КПП: %1 (Запись за период %2, КПП %3)'"), 
				ТекстСообщенияБсп, Формат(Запись.Период, "ДЛФ=D;"), Запись.КПП);
 			ОбщегоНазначения.СообщитьПользователю(ТекстСообщения, , , , Отказ);
 		КонецЕсли;
	КонецЦикла;
	
КонецПроцедуры

#КонецОбласти

#Иначе
ВызватьИсключение НСтр("ru = 'Недопустимый вызов объекта на клиенте.'");
#КонецЕсли